if (self.CavalryLogger) { CavalryLogger.start_js(["hzm2z"]); }

__d("rayInterceptsBox",["invariant"],(function a(b,c,d,e,f,g,h){function i(k,l){var m=Object.keys(k);l.forEach(function(n){m.indexOf(n)!==-1||h(0);typeof k[n]==="number"||h(0)})}var j={check:function k(l,m){i(l,["minX","maxX","minY","maxY"]);i(m,["x","y","dx","dy"]);l.maxX>l.minX&&l.maxY>l.minY||h(0);if(m.dx===0&&m.dy===0)return false;if(m.x>=l.minX&&m.x<=l.maxX&&m.y>=l.minY&&m.y<=l.maxY)return true;var n=(l.minX-m.x)/m.dx,o=(l.maxX-m.x)/m.dx,p=(l.minY-m.y)/m.dy,q=(l.maxY-m.y)/m.dy,r=Math.max(Math.min(n,o),Math.min(p,q)),s=Math.min(Math.max(n,o),Math.max(p,q));if(r<0)return false;if(r>s)return false;return true}};f.exports=j}),null);
__d("AdsMouseStateStore",["invariant","$","Arbiter","Event","EventEmitter","Run","SubscriptionsHandler","Vector","ge","keyMirror","rayInterceptsBox","throttle"],(function a(b,c,d,e,f,g,h){"use strict";var i,j,k=30,l=500,m="pagelet_ego_pane",n=c("keyMirror")({STATIONARY:null,INTENT:null,HOVER:null,NO_INTENT:null});function o(event){try{return{x:event.clientX||event.x,y:event.clientY||event.y}}catch(q){var r=Math.random()*1e3;return{x:r,y:r}}}i=babelHelpers.inherits(p,c("EventEmitter"));j=i&&i.prototype;function p(){var q=arguments.length<=0||arguments[0]===undefined?m:arguments[0],r=arguments.length<=1||arguments[1]===undefined?l:arguments[1];j.constructor.call(this);this.destroy=function(){if(this.$AdsMouseStateStore8)this.$AdsMouseStateStore8.release();this.removeAllListeners()}.bind(this);this.onPageTransition=function(event){this.$AdsMouseStateStore9()}.bind(this);this.onMouseMove=function(event){this.calculateState(o(event))}.bind(this);this.$AdsMouseStateStore7=q;this.$AdsMouseStateStore9();this.$AdsMouseStateStore8=new(c("SubscriptionsHandler"))().addSubscriptions(c("Event").listen(document,"mousemove",c("throttle")(this.onMouseMove,r)),c("Arbiter").subscribe("page_transition",this.onPageTransition));c("Run").onLeave(this.destroy)}p.prototype.$AdsMouseStateStore9=function(){this.$AdsMouseStateStore1=n.STATIONARY;this.$AdsMouseStateStore2=this.$AdsMouseStateStore3=0;this.$AdsMouseStateStore4=Date.now();this.$AdsMouseStateStore5=this.$AdsMouseStateStore7;this.$AdsMouseStateStore6=Infinity};p.prototype.getState=function(){return this.$AdsMouseStateStore1};p.prototype.updateRhcID=function(q){c("$")(q)||h(0);this.$AdsMouseStateStore5=q};p.prototype.getRhcID=function(){return this.$AdsMouseStateStore5};p.prototype.__updateMousePos=function(q){this.$AdsMouseStateStore2=q.x;this.$AdsMouseStateStore3=q.y};p.prototype.isRhcPresent=function(){if(!c("ge")(this.$AdsMouseStateStore5))return false;var q=this.getRhcDimensions();return q.y>0&&q.x>0};p.prototype.getRhc=function(){return c("$")(this.$AdsMouseStateStore5)};p.prototype.getRhcPosition=function(){return c("Vector").getElementPosition(this.getRhc())};p.prototype.getRhcScreenPos=function(){var q=c("Vector").getScrollPosition(),r=this.getRhcPosition();return{x:r.x-q.x,y:r.y-q.y}};p.prototype.getRhcDimensions=function(){return c("Vector").getElementDimensions(this.getRhc())};p.prototype.getPointToRectSquareDist=function(){return this.$AdsMouseStateStore6};p.prototype.isPointWithinDist=function(q){var r=this.getPointToRectSquareDist();return r<=q*q};p.prototype.getRhcBoundingBox=function(){var q=this.getRhcDimensions(),r=this.getRhcScreenPos();return{minX:r.x,maxX:r.x+q.x,minY:r.y,maxY:r.y+q.y}};p.prototype.$AdsMouseStateStore10=function(q){var r=this.getRhcBoundingBox(),s={x:(r.minX+r.maxX)/2,y:(r.minY+r.maxY)/2},t=Math.abs(r.minX-r.maxX),u=Math.abs(r.minY-r.maxY),v=Math.max(Math.abs(q.x-s.x)-t/2,0),w=Math.max(Math.abs(q.y-s.y)-u/2,0);this.$AdsMouseStateStore6=v*v+w*w};p.prototype.isPosContainedInRhc=function(q){var r=this.getRhcBoundingBox();return q.x>=r.minX&&q.x<=r.maxX&&q.y>=r.minY&&q.y<=r.maxY};p.prototype.hasMovedMinDistance=function(q){var r=q.x-this.$AdsMouseStateStore2,s=q.y-this.$AdsMouseStateStore3;return r*r+s*s>=k*k};p.prototype.tooSoon=function(){return Date.now()-this.$AdsMouseStateStore4<l};p.prototype.$AdsMouseStateStore11=function(){this.$AdsMouseStateStore4=Date.now()};p.prototype.calculateState=function(q){if(this.tooSoon())return;this.$AdsMouseStateStore11();if(!this.isRhcPresent())return;if(this.isPosContainedInRhc(q)){this.transitionToState(n.HOVER);this.$AdsMouseStateStore6=0;this.__updateMousePos(q);this.scheduleCheckup();return}else if(!this.hasMovedMinDistance(q)){this.transitionToState(n.STATIONARY);return}this.$AdsMouseStateStore10(q);var r=this.isMovingTowardsRhc(q)?n.INTENT:n.NO_INTENT;this.transitionToState(r);this.__updateMousePos(q);this.scheduleCheckup()};p.prototype.isMovingTowardsRhc=function(q){var r={x:this.$AdsMouseStateStore2,y:this.$AdsMouseStateStore3};if(this.isPosContainedInRhc(r))return true;var s=this.getRhcBoundingBox(),t={x:this.$AdsMouseStateStore2,y:this.$AdsMouseStateStore3,dx:q.x-this.$AdsMouseStateStore2,dy:q.y-this.$AdsMouseStateStore3};return c("rayInterceptsBox").check(s,t)};p.prototype.scheduleCheckup=function(){var q={x:this.$AdsMouseStateStore2,y:this.$AdsMouseStateStore3};setTimeout(function(){this.calculateState(q)}.bind(this),l*1.5)};p.prototype.transitionToState=function(q){if(q===this.$AdsMouseStateStore1)return;this.$AdsMouseStateStore1=q;this.emit("change")};p.get=function(){if(!p.$AdsMouseStateStore12)p.$AdsMouseStateStore12=new p();return p.$AdsMouseStateStore12};p.STATES=n;p.MIN_MOVE_DISTANCE=k;p.THROTTLE_TIME=l;f.exports=p}),null);
__d("AdsPagerConstants",["keyMirror"],(function a(b,c,d,e,f,g){var h=c("keyMirror")({ADD_PAGE:null,PAGE_TRANSITION:null,REQUEST_PAGE:null}),i=c("keyMirror")({VIEW_ACTION:null,SERVER_ACTION:null});f.exports={ActionTypes:h,PayloadSources:i}}),null);
__d("AdsPagerDispatcher",["AdsPagerConstants","Dispatcher_DEPRECATED"],(function a(b,c,d,e,f,g){"use strict";var h=c("AdsPagerConstants").PayloadSources;function i(k){return function(l){this.dispatch({payloadSource:k,action:l})}}var j=Object.assign(new(c("Dispatcher_DEPRECATED"))(),{handleUpdateFromViewAction:i(h.VIEW_ACTION),handleUpdateFromServerAction:i(h.SERVER_ACTION)});f.exports=j}),null);
__d("AdsRefreshHandler",["csx","AdsMouseStateStore","AdsPagerConstants","AdsPagerDispatcher","Arbiter","CSSFade","DataAttributeUtils","DOM","Event","SubscriptionsHandler","Toggler","UIPagelet","VideoPlayerExperiments","cxodecode","debounceAcrossTransitions","getOrCreateDOMID"],(function a(b,c,d,e,f,g,h){var i=c("AdsMouseStateStore").STATES,j=600,k=c("AdsMouseStateStore").get(),l=void 0;function m(n,o,p){"use strict";if(!p.data||!p.pid)return;if(o.nonce)l=c("cxodecode")(o.nonce);this.$AdsRefreshHandler1=n;this.$AdsRefreshHandler2=Date.now();this.$AdsRefreshHandler3=o;this.$AdsRefreshHandler4=p;this.$AdsRefreshHandler5=0;this.$AdsRefreshHandler6=false;this.$AdsRefreshHandler7=true;this.$AdsRefreshHandler8=0;this.$AdsRefreshHandler9=null;this.$AdsRefreshHandler10=c("debounceAcrossTransitions")(this.reloadAdsIfNeeded.bind(this),this.$AdsRefreshHandler3.delay);this.$AdsRefreshHandler11=new(c("SubscriptionsHandler"))();this.$AdsRefreshHandler11.addSubscriptions(c("Event").listen(this.$AdsRefreshHandler1,"mouseenter",this.setMouseOver.bind(this,true)),c("Event").listen(this.$AdsRefreshHandler1,"mouseleave",this.setMouseOver.bind(this,false)),k.addListener("change",this.onMouseStateStoreChange.bind(this)),c("Arbiter").subscribe("AdsPreferencesDialog/opened",this.stopRefreshingRHC.bind(this)),c("Arbiter").subscribe("AdsPreferencesDialog/closed",this.startRefreshingRHC.bind(this)),c("Arbiter").subscribe("VideoChannelView/opened",this.stopRefreshingRHC.bind(this)),c("Arbiter").subscribe("VideoChannelView/closed",this.startRefreshingRHC.bind(this)));if(c("VideoPlayerExperiments").rhcWNSPauseAds)this.$AdsRefreshHandler11.addSubscriptions(c("Arbiter").subscribe("VideoWatchAndScrollController/init",this.stopRefreshingRHC.bind(this)),c("Arbiter").subscribe("VideoWatchAndScrollController/exit",this.startRefreshingRHC.bind(this)));this.$AdsRefreshHandler12();c("AdsPagerDispatcher").register(this.handlePageDispatch.bind(this))}m.prototype.$AdsRefreshHandler12=function(){"use strict";if(this.$AdsRefreshHandler13)this.$AdsRefreshHandler13.release();this.$AdsRefreshHandler13=new(c("SubscriptionsHandler"))();var n=c("DOM").scry(this.$AdsRefreshHandler1,".uiToggle");for(var o=0;o<n.length;o++)this.$AdsRefreshHandler13.addSubscriptions(c("Toggler").listen("show",n[o],this.stopRefreshingRHC.bind(this)),c("Toggler").listen("hide",n[o],this.startRefreshingRHC.bind(this)))};m.prototype.handlePageDispatch=function(n){"use strict";var o=n.action||{};if(o.actionType===c("AdsPagerConstants").ActionTypes.REQUEST_PAGE)this.reloadAds()};m.prototype.setMouseOver=function(n){"use strict";this.$AdsRefreshHandler14=n;if(n&&this.$AdsRefreshHandler9!=null){this.$AdsRefreshHandler9.cancel();this.$AdsRefreshHandler9=null}};m.prototype.subscribeDefaultEventsForRefresh=function(){"use strict";this.$AdsRefreshHandler11.addSubscriptions(c("Event").listen(window,"scroll",this.$AdsRefreshHandler10),c("Event").listen(window,"resize",this.$AdsRefreshHandler10));return this};m.prototype.reloadWithDebounce=function(){"use strict";this.$AdsRefreshHandler10()};m.prototype.reloadWithoutDebounce=function(){"use strict";this.reloadAdsIfNeeded()};m.prototype.stopRefreshingRHC=function(n,o){"use strict";if(c("VideoPlayerExperiments").rhcWNSPauseAds)this.$AdsRefreshHandler8++;else this.$AdsRefreshHandler7=false};m.prototype.startRefreshingRHC=function(n,o){"use strict";this.$AdsRefreshHandler2=Date.now();if(c("VideoPlayerExperiments").rhcWNSPauseAds){if(--this.$AdsRefreshHandler8<0)this.$AdsRefreshHandler8=0}else this.$AdsRefreshHandler7=true};m.prototype.forceLoadIfEnoughTimePassed=function(n){"use strict";if(Date.now()-this.$AdsRefreshHandler2>n)this.reloadAds()};m.prototype.containsPremium=function(){"use strict";var n=c("DOM").scry(this.$AdsRefreshHandler1,l||"div._4u8");return!!n.filter(function(o){return JSON.parse(c("DataAttributeUtils").getDataAttribute(o,"data-ad")).segment==="premium"}).length};m.prototype.reloadAdsIfNeeded=function(){"use strict";if(!this.$AdsRefreshHandler1)return;c("Arbiter").inform("AdsRefreshHandler/CheckingReload");if(this.$AdsRefreshHandler3.stateRefresh){this.reloadAdsIfNeededStateBased();return}if(this.containsPremium()||this.$AdsRefreshHandler14||!this.$AdsRefreshHandler3.interval)return;if(Date.now()-this.$AdsRefreshHandler2>=this.$AdsRefreshHandler3.interval)this.reloadAds()};m.prototype.reloadAdsIfNeededStateBased=function(){"use strict";if(Date.now()-this.$AdsRefreshHandler2<this.$AdsRefreshHandler3.interval)return;if(this.containsPremium())return;if(!this.$AdsRefreshHandler3.interval)return;this.$AdsRefreshHandler6=true;c("Arbiter").inform("AdsRefreshHandler/RefreshScheduled");this.checkScheduledRefresh()};m.prototype.getRefreshScheduled=function(){"use strict";return this.$AdsRefreshHandler6};m.prototype.onMouseStateStoreChange=function(){"use strict";this.checkScheduledRefresh()};m.prototype.checkScheduledRefresh=function(){"use strict";if(!this.$AdsRefreshHandler6)return;if(this.$AdsRefreshHandler14)return;var n=k.getState(),o=false;switch(n){case i.HOVER:case i.NO_INTENT:o=true;break;default:break}if(!o)return;this.$AdsRefreshHandler6=false;this.reloadAds()};m.prototype.reloadAds=function(){"use strict";if(!this.$AdsRefreshHandler1)return;this.$AdsRefreshHandler2=Date.now();if(c("VideoPlayerExperiments").rhcWNSPauseAds){if(this.$AdsRefreshHandler8)return}else if(!this.$AdsRefreshHandler7)return;var n=this.$AdsRefreshHandler4&&this.$AdsRefreshHandler4.data,o=babelHelpers["extends"]({},n,{refresh_num:++this.$AdsRefreshHandler5});this.$AdsRefreshHandler9=c("UIPagelet").loadFromEndpoint("WebEgoPane",this.$AdsRefreshHandler1,{dom_id:c("getOrCreateDOMID")(this.$AdsRefreshHandler1),pid:this.$AdsRefreshHandler4.pid,data:o},{bundle:false,handler:this.onLoadHandler.bind(this)});c("Arbiter").inform("AdsRefreshHandler/AdsLoading")};m.prototype.onLoadHandler=function(){"use strict";c("Arbiter").inform("AdsRefreshHandler/AdsLoaded");this.$AdsRefreshHandler9=null;this.$AdsRefreshHandler12();if(!this.$AdsRefreshHandler3.fade)return;c("CSSFade").show(this.$AdsRefreshHandler1,{duration:j})};m.prototype.cleanup=function(){"use strict";this.$AdsRefreshHandler1=null;this.$AdsRefreshHandler11.release();this.$AdsRefreshHandler10.reset()};f.exports=m}),null);
__d("HomeRHCAdsBasicRefresh",["AdsRefreshHandler","Arbiter","NavigationMessage","Run","SubscriptionsHandler","ge"],(function a(b,c,d,e,f,g){var h,i,j,k;function l(){if(h){h.cleanup();h=null}if(i){i.release();i=null}j=null}function m(){var p=c("ge")(k);if(p&&j){p.appendChild(j);j=null}}function n(p,q){j=q;h&&h.forceLoadIfEnoughTimePassed(0)}var o={init:function p(q,r,s){k=q;h=new(c("AdsRefreshHandler"))(c("ge")(q),r,s).subscribeDefaultEventsForRefresh();i=new(c("SubscriptionsHandler"))();i.addSubscriptions(c("Arbiter").subscribe(c("NavigationMessage").NAVIGATION_BEGIN,l),c("Arbiter").subscribe("ProfileQuestionAnswered",n),c("Arbiter").subscribe("AdsRefreshHandler/AdsLoaded",m));c("Run").onLeave(l)}};f.exports=o}),null);
__d("XFeedSeeFirstStoryController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/feed/control/see_first/story/",{})}),null);
__d("SeeFirstStoryLogger",["AsyncRequest","XFeedSeeFirstStoryController"],(function a(b,c,d,e,f,g){var h=function h(){var i=c("XFeedSeeFirstStoryController").getURIBuilder().getURI();new(c("AsyncRequest"))(i).send()};f.exports={log:h}}),null);
__d("ListestandStreamTailStoryPlaceholderVisbilityTracker",["PageletEventConstsJS","PageletEventsHelper","onRectIsWithinViewport","performanceAbsoluteNow"],(function a(b,c,d,e,f,g){"use strict";var h=null,i=null,j=null,k=false,l={},m={setPlaceholderElement:function o(p){if(!k){c("PageletEventsHelper").subscribeToPageletEvents(n);k=true}h=p;i&&i.remove();i=c("onRectIsWithinViewport")(function(){return p.getBoundingClientRect()},function(q){if(!j&&q)j=c("performanceAbsoluteNow")()})},getStoryPlaceholderVisibleDuration:function o(p){return l[p]||0}};function n(o,p){if(o.startsWith("hyperfeed_story")&&p===c("PageletEventConstsJS").DISPLAY_END){var q=c("performanceAbsoluteNow")();l[o]=j?q-j:0;if(h){var r=h.getBoundingClientRect().top,s=r-window.scrollTop;j=s<window.innerHeight&&s>0?q:null}else j=null}}f.exports=m}),null);
__d("NewsFeedDedupeStoryController",["CSS","DOMQuery","queryThenMutateDOM"],(function a(b,c,d,e,f,g){var h={dedupe:function i(j,k){c("queryThenMutateDOM")(function(){var l={};return c("DOMQuery").scry(j,k).filter(function(m){var n=m.getAttribute("data-dedupekey");if(n&&c("CSS").shown(m)){if(l[n])return true;l[n]=true}return false})},function(l){l.forEach(function(m){c("CSS").hide(m);m.removeAttribute("style")})},"NewsFeedDedupeStoryControllerDedupe")}};f.exports=h}),null);
__d("NewsFeedOffscreenController",["Arbiter","CSS","DOMQuery","IntersectionObserver","NavigationMessage","Run","Style","SubscriptionsHandler","debounce","getOrCreateDOMID","queryThenMutateDOM"],(function a(b,c,d,e,f,g){var h=400,i=10,j={},k=null,l={rootMargin:h+"px 0px "+h+"px 0px"},m=null,n={};function o(){for(var w in n)if(c("DOMQuery").scry(n[w],"div[data-fullscreen]").length)delete n[w];else j[w]=n[w].offsetHeight}function p(){var w=void 0,x=void 0;for(var y in n){x=j[y];if(x!==undefined&&x>0){c("Style").apply(n[y],{height:x+"px",marginBottom:i+"px"});w=n[y].firstElementChild;if(w)c("CSS").hide(w);delete j[y]}delete n[y]}}var q=c("debounce")(function(){c("queryThenMutateDOM")(o,p,"NewsFeedOffscreenController")});function r(w){delete n[c("getOrCreateDOMID")(w)];c("Style").apply(w,{height:"",marginBottom:""});var x=w.firstElementChild;if(x)c("CSS").show(x)}function s(w){var x=[];w.forEach(function(y){if(y.isIntersecting||y.intersectionRatio>0)x.push(y.target);else n[c("getOrCreateDOMID")(y.target)]=y.target});q();x.forEach(r)}function t(){k&&k.disconnect();k=null;m&&m.release();m=null}function u(){if(k)return k;k=new(c("IntersectionObserver"))(s,l);var m=new(c("SubscriptionsHandler"))();m.addSubscriptions(c("Arbiter").subscribe(c("NavigationMessage").NAVIGATION_BEGIN,t),c("Run").onLeave(t));return k}var v={attachSubstream:function w(x){u().observe(x)}};f.exports=v}),null);
__d("NewsFeedTailLoadController",["Arbiter","Bootloader","CSS","DOM","Event","IntersectionObserver","ListestandStreamTailStoryPlaceholderVisbilityTracker","LitestandMessages","LitestandStream","NavigationMessage","NewsFeedDedupeStoryController","NewsFeedOffscreenController","Run","SubscriptionsHandler","FunnelLogger","AsyncResponse","ge","getElementPosition","getOrCreateDOMID","getViewportDimensions"],(function a(b,c,d,e,f,g){var h=100,i=3e4,j={"streamload.tail.commence":true,"streamload.tail.success":true,"streamload_error.tail":true,"streamload_error.tail.transport":true,"streamload_error.tail.final":true,"streamload.tail.retry":true,"streamload_error.tail.retry":true,"streamload.tail.retry.success":true,"streamload_timeout.tail":true},k=void 0,l=void 0,m={},n="WWW_NEWSFEED_TAILLOAD_FUNNEL",o=2,p=null,q=void 0,r=null,s=void 0,t=null,u=0,v=0,w=null,x=function x(G){G.forEach(function(H){if(j[H])c("FunnelLogger").appendActionWithTag(n,v,H,"try_"+u)});c("Bootloader").loadModules(["BanzaiODS"],function(H){G.forEach(function(I){H.bumpEntityKey("feed_load",I)})},"NewsFeedTailLoadController")},y=function y(G,H){c("Arbiter").inform(c("LitestandMessages").STREAM_LOAD_ERROR,H);var I=["streamload_error.tail"];if(u>0)I.push("streamload_error.tail.retry");if(u<o){u++;B(G);I.push("streamload.tail.retry");c("Arbiter").inform(c("LitestandMessages").STREAM_LOAD_RETRY)}else t&&c("CSS").removeClass(t,"async_saving");x(I)},z=function z(){A();q=setTimeout(function(){x(["streamload_timeout.tail"])},i)},A=function A(){q&&clearTimeout(q)},B=function B(G){if(u<1){c("FunnelLogger").startFunnel(n,v);c("FunnelLogger").addFunnelTag(n,v,"NewsFeedTailLoadController")}x(["streamload.tail.commence"]);if(m[G]){x(["duplicate_cursor"]);c("Arbiter").inform(c("LitestandMessages").DUPLICATE_CURSOR_ERROR,G)}m[G]=true;var H={client_stories_count:c("DOM").scry(c("LitestandStream").getStreamRoot(),c("LitestandStream").getStoriesSelector()).length,cursor:G,feed_stream_id:c("LitestandStream").getFeedStreamID(),pager_config:s,scroll_count:v+1,story_id:c("LitestandStream").getStoryID()},I=function I(L){y(G,L)},J=function J(L){x(["streamload_error.tail.transport"]);y(G,L)},K=function K(L){if(L.error)x(["streamload_error.tail.final"]);else{x(["streamload.tail.success"]);v++}};if(!r)c("Bootloader").loadModules(["UIPagelet"],function(L){r=L.loadFromEndpoint("LitestandTailLoadPagelet",c("getOrCreateDOMID")(k),H,{append:true,automatic:true,constHeight:true,crossPage:true,errorHandler:I,finallyHandler:K,transportErrorHandler:J,usePipe:true});c("Arbiter").inform(c("LitestandMessages").STORIES_REQUESTED)},"NewsFeedTailLoadController");else{r.setErrorHandler(I).setTransportErrorHandler(J).go(H);c("Arbiter").inform(c("LitestandMessages").STORIES_REQUESTED)}};function C(){p&&p.disconnect();p=null;w&&w.release();w=null;m={};r=null;v=0;A()}function D(event){B(l);t&&c("CSS").addClass(t,"async_saving");event.preventDefault()}function E(G){var H=false;G.forEach(function(I){if(I.target===t){var J=I.isIntersecting||I.intersectionRatio>0;if(J){H=true;t&&c("CSS").addClass(t,"async_saving");B(l);p&&t&&p.unobserve(t)}}});return H}var F={init:function G(H,I,J,K,L){k=J;l=H;t=I;s=K;var M=L.firstPagerScrollBuffer||h,N=c("getElementPosition")(I),O=c("getViewportDimensions")(),P=Math.max(N.y-M-O.height,0);p=new(c("IntersectionObserver"))(function(Q){if(E(Q)){p&&p.disconnect();p=new(c("IntersectionObserver"))(function(Q){E(Q)},{rootMargin:"0px 0px "+L.bufferPixels+"px 0px"})}},{rootMargin:"0px 0px "+P+"px 0px"});p.observe(t);c("ListestandStreamTailStoryPlaceholderVisbilityTracker").setPlaceholderElement(t);w=new(c("SubscriptionsHandler"))();w.addSubscriptions(c("Arbiter").subscribe(c("LitestandMessages").STORIES_REQUESTED,z),c("Arbiter").subscribe([c("LitestandMessages").STORIES_INSERTED,c("LitestandMessages").STREAM_LOAD_ERROR],A),c("Arbiter").subscribe(c("NavigationMessage").NAVIGATION_BEGIN,C),c("Event").listen(t,"click",D),c("Run").onLeave(C))},destroy:function G(){C();t&&c("CSS").hide(t)},setCursor:function G(H){var I=c("LitestandStream").getStreamRoot();if(I)c("NewsFeedDedupeStoryController").dedupe(I,c("LitestandStream").getStoriesSelector());t&&c("CSS").removeClass(t,"async_saving");l=H;p&&t&&p.observe(t);u=0},moreStoriesInserted:function G(H){c("Arbiter").inform(c("LitestandMessages").STORIES_INSERTED,{substream_id:H});var I=c("ge")(H);if(I){c("NewsFeedOffscreenController").attachSubstream(I);if(u>0){u=0;x(["streamload.tail.retry.success"])}}},handleError:function G(H){y(H)}};f.exports=F}),null);
__d("PrivacySelectorEvent",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({OPEN_MENU:"open_menu",CLOSE_MENU:"close_menu",MORE_OPTIONS:"more_options",MORE:"more",SEE_ALL:"see_all",CUSTOM_SAVE:"custom_save",CUSTOM_CANCEL:"custom_cancel",SELECT_CUSTOM:"select_custom",SPECIFIC_FRIENDS_SAVE:"specific_friends_save",SPECIFIC_FRIENDS_CANCEL:"specific_friends_cancel",SELECT_SPECIFIC_FRIENDS:"select_specific_friends",FRIENDS_EXCEPT_SAVE:"friends_except_save",FRIENDS_EXCEPT_CANCEL:"friends_except_cancel",SELECT_FRIENDS_EXCEPT:"select_friends_except",SELECT_EVERYONE:"select_everyone",SELECT_FRIENDS_OF_FRIENDS:"select_friends_of_friends",SELECT_FRIENDS:"select_friends",SELECT_FRIENDS_EXCEPT_ACQUIANTANCES:"select_friends_except_acquaintances",SELECT_ONLY_ME:"select_only_me",SELECT_FB_ONLY:"select_fb_only",SELECT_FRIENDLIST:"select_friendlist",SELECT_OTHER:"select_other"})}),null);
__d("PrivacySelectorSelectableItem",["csx","cx","CSS","DOM","DOMQuery","MenuSelectableItem","React","SutroPhase2GatingConfig"],(function a(b,c,d,e,f,g,h,i){var j,k,l="._o00",m="._o01",n="._po2";j=babelHelpers.inherits(o,c("MenuSelectableItem"));k=j&&j.prototype;function o(p){"use strict";if(p.icon){var q=c("SutroPhase2GatingConfig").enabled_privacy_icons,r="_392n"+(q?" _1rwt":"");if(p.children)p.icon=c("React").createElement("div",{className:r},p.icon);else p.icon=c("DOM").create("div",{className:r},p.icon)}k.constructor.call(this,p)}o.prototype.render=function(){"use strict";var p=k.render.call(this),q=c("DOMQuery").find(p,"._54nh");c("CSS").addClass(q,"_4chm");var r=q.parentNode;c("CSS").addClass(r,"_4chl");var s=c("DOMQuery").scry(p,"._392n")[0];if(!s)c("CSS").addClass(r,"_4857");return p};o.prototype.isMoreButton=function(){"use strict";return c("CSS").matchesSelector(this.getRoot(),l)};o.prototype.isMoreOptionsButton=function(){"use strict";return c("CSS").matchesSelector(this.getRoot(),n)};o.prototype.isSeeAllButton=function(){"use strict";return c("CSS").matchesSelector(this.getRoot(),m)};f.exports=o}),null);
__d("PrivacySelectorOptionNew",["csx","cx","fbt","CSS","DOM","DOMQuery","JSXDOM","PrivacyConst","PrivacySelectorEvent","PrivacySelectorSelectableItem"],(function a(b,c,d,e,f,g,h,i,j){var k,l;k=babelHelpers.inherits(m,c("PrivacySelectorSelectableItem"));l=k&&k.prototype;function m(n){"use strict";l.constructor.call(this,n);this._origLabel=this.getLabel();this._origTriggerLabel=this.getTriggerLabel()}m.prototype._getData=function(){"use strict";return this._data};m.prototype.getTooltip=function(){"use strict";return this._getData().tooltip};m.prototype.getPostParam=function(){"use strict";return this._getData().postParam.toString()};m.prototype.setPostParam=function(n){"use strict";this._getData().postParam=n;return this};m.prototype.getSubtitles=function(){"use strict";return this._data.optionSubtitles};m.prototype.setSubtitles=function(n){"use strict";if(this._data.optionSubtitles!=null)this._data.optionSubtitles=n;return this};m.prototype.getTriggerIcon=function(){"use strict";return this._getData().triggerIcon};m.prototype.getTriggerLabel=function(){"use strict";return this._getData().triggerLabel};m.prototype.getIconType=function(){"use strict";return this._getData().iconType};m.prototype.isPublic=function(){"use strict";return this.getPostParam()===c("PrivacyConst").PostParam.EVERYONE.toString()};m.prototype.isFriendsOfFriends=function(){"use strict";return this.getPostParam()===c("PrivacyConst").PostParam.FRIENDS_OF_FRIENDS.toString()};m.prototype.isFriends=function(){"use strict";return this.getPostParam()===c("PrivacyConst").PostParam.FRIENDS.toString()};m.prototype.isFriendsExceptAcquaintances=function(){"use strict";return this.getPostParam()===c("PrivacyConst").PostParam.FRIENDS_MINUS_ACQUAINTANCES.toString()};m.prototype.isOnlyMe=function(){"use strict";return this.getPostParam()===c("PrivacyConst").PostParam.ONLY_ME.toString()};m.prototype.isFBOnly=function(){"use strict";return this.getPostParam()===c("PrivacyConst").PostParam.FB_ONLY.toString()};m.prototype.isFriendlist=function(){"use strict";return this._data.isFriendlist};m.prototype.isBasicOption=function(){"use strict";return true};m.prototype.isCustomOption=function(){"use strict";return false};m.prototype.isSavedCustomOption=function(){"use strict";return false};m.prototype.getSavedCustomPrivacyType=function(){"use strict";return null};m.prototype.getTagExpansionBehavior=function(){"use strict";return this._getData().tagExpansionBehavior};m.prototype.getBaseValue=function(){"use strict";return this._getData().baseValue};m.prototype.getIndex=function(){"use strict";return this._getData().value};m.prototype.getLoggingEventName=function(){"use strict";if(this.isPublic())return c("PrivacySelectorEvent").SELECT_EVERYONE;else if(this.isFriendsOfFriends())return c("PrivacySelectorEvent").SELECT_FRIENDS_OF_FRIENDS;else if(this.isFriends())return c("PrivacySelectorEvent").SELECT_FRIENDS;else if(this.isFriendsExceptAcquaintances())return c("PrivacySelectorEvent").SELECT_FRIENDS_EXCEPT_ACQUIANTANCES;else if(this.isOnlyMe())return c("PrivacySelectorEvent").SELECT_ONLY_ME;else if(this.isFBOnly())return c("PrivacySelectorEvent").SELECT_FB_ONLY;else if(this.isFriendlist())return c("PrivacySelectorEvent").SELECT_FRIENDLIST;else return c("PrivacySelectorEvent").SELECT_OTHER};m.prototype.updateAfterTagExpansion=function(n,o){"use strict";var p=this._origLabel,q=this._origTriggerLabel;if(n&&this._getData().showPlusOnTagExpansion){p=j._("{privacyLabel} (+)",[j.param("privacyLabel",p)]);if(o&&this.isFriends())q=j._("Friends, Friends of Tagged");else q=j._("{privacyLabel} (+)",[j.param("privacyLabel",q)])}this._setLabel(p);this._getData().triggerLabel=q;var r=this._getExpansionType(n),s=this._getData().optionSubtitles||{};this._setSubtitle(s[r])};m.prototype.isBelowSoftFold=function(){"use strict";return c("CSS").matchesSelector(this.getRoot(),"._4mwj")};m.prototype.isBelowFold=function(){"use strict";return c("CSS").matchesSelector(this.getRoot(),"._3ey_")};m.prototype.removeOnBootload=function(){"use strict";return!!this._getData().removeOnBootload};m.prototype._setLabel=function(n){"use strict";if(!n)return;var o=c("DOMQuery").find(this.getRoot(),"._54nh");o&&c("DOM").setContent(o,n);this._getData().label=n};m.prototype._setSubtitle=function(n){"use strict";if(!n)return;var o=c("DOMQuery").scry(this.getRoot(),"._48u1");o&&o[0]&&c("DOM").setContent(o[0],n)};m.prototype._getExpansionType=function(n){"use strict";return n?c("PrivacyConst").ExpansionType.TAGS_ONLY:c("PrivacyConst").ExpansionType.NONE};m.prototype.render=function(){"use strict";var n=l.render.call(this);if(!this._getData().isPrimaryOption)return n;var o=c("DOMQuery").find(n,"._54nc");o&&c("CSS").addClass(o,"_48t_");var p=c("DOMQuery").scry(n,"._392n")[0];if(!p&&o)c("CSS").addClass(o,"_4zfs");var q=c("DOM").find(n,"._54nh");q&&c("CSS").addClass(q,"_48u0");var r=c("JSXDOM").div({className:"_48u1"},this._getData().optionSubtitle);c("DOM").appendContent(o,r);return n};f.exports=m}),null);
__d("XPrivacySelectorLoggingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/privacy/selector/log/",{event:{type:"Enum",required:true,enumType:1},render_location:{type:"Enum",required:true,enumType:1},content_type:{type:"String",required:true},privacy_fbid:{type:"String"},saved_custom_opt_in:{type:"Bool",defaultValue:false}})}),null);
__d("PrivacySelectorCustomOption",["invariant","AsyncDialog","AsyncRequest","DataStore","PrivacySelectorEvent","PrivacySelectorOptionNew","XPrivacyCustomDialogController","XPrivacySelectorLoggingController"],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c("PrivacySelectorOptionNew"));j=i&&i.prototype;function k(l){"use strict";j.constructor.call(this,l);this._subtitlesWhenNotSelected=l.optionSubtitlesWhenNotSelected}k.prototype.isBasicOption=function(){"use strict";return false};k.prototype.isCustomOption=function(){"use strict";return true};k.prototype.getSelector=function(){"use strict";return this._selector};k.prototype.getLoggingEventName=function(){"use strict";return c("PrivacySelectorEvent").SELECT_CUSTOM};k.prototype.setSubtitlesToNonSelected=function(){"use strict";this.setSubtitles(this._subtitlesWhenNotSelected)};k.prototype.openDialog=function(l){"use strict";if(this._selector==null)this._selector=l;c("DataStore").set(this._data.id,"PrivacySelectorCustomOption",this);var m=c("XPrivacyCustomDialogController").getURIBuilder().setString("option_id",this._data.id).setString("id",this._data.privacyfbid.toString()).setString("post_param",l.getPostParam()).setString("content_type",l.getContentType()).setEnum("render_location_enum",l.getRenderLocation()).setIntVector("tags",l.getTags()).setBool("autosave",this._data.autosave).setBool("limit_community",this._data.limitcommunity).setBool("limit_facebook",this._data.limitfacebook).setBool("limit_fof",this._data.limitfof).setBool("limit_tagexpand",this._data.limittagexpand).setBool("is_new_privacy_selector",true).setBool("saved_custom_opt_in",l.getSavedCustomOptIn()).getURI(),n=new(c("AsyncRequest"))(m);n.setRelativeTo(l.getTriggerButtonElement());c("AsyncDialog").send(n,function(o){var p=function(q){var r=document.getElementsByName("render_location")[0];r instanceof HTMLInputElement||h(0);var s=document.getElementsByName("content_type")[0];s instanceof HTMLInputElement||h(0);var m=c("XPrivacySelectorLoggingController").getURIBuilder().setEnum("event",q).setString("privacy_fbid",this._data.privacyfbid!=null?String(this._data.privacyfbid):null).setEnum("render_location",r.value).setString("content_type",s.value).getURI();new(c("AsyncRequest"))().setURI(m).send()}.bind(this);o.subscribe("hide",function(){l.inform("custom/hide");l.inform("selectorFinished")});o.subscribe("success",function(){l.inform("custom/success");p(c("PrivacySelectorEvent").CUSTOM_SAVE)});o.subscribe("cancel",function(){l.inform("custom/cancel");p(c("PrivacySelectorEvent").CUSTOM_CANCEL)})}.bind(this))};k.customPrivacySave=function(l,m,n){var o=arguments.length<=3||arguments[3]===undefined?{}:arguments[3];"use strict";var p=c("DataStore").get(l,"PrivacySelectorCustomOption");c("DataStore").remove(l,"PrivacySelectorCustomOption");if(!(p==null))if(!(p.getSelector==null)){var q=p.getSelector();if(n!==null)q.updateSavedCustomOption(n,m,o);else q.updateCustomOption(o);q.selectOption(m);q.finishAnimatingSavedCustomSave()}};f.exports=k}),null);
__d("XPrivacySelectorAsyncMoreController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/privacy/selector/async_more/",{id:{type:"String",required:true},next_value:{type:"Int",required:true},render_location_enum:{type:"Enum",required:true,enumType:1}})}),null);
__d("PrivacySelectableMenu",["cx","Arbiter","AsyncRequest","CSS","DataStore","Ease","PrivacySelectorCustomOption","PrivacySelectorEvent","PrivacySelectorOptionNew","PrivacySelectorSelectableItem","SelectableMenu","SelectableMenuUtils","XPrivacySelectorAsyncMoreController","XPrivacySelectorLoggingController"],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c("SelectableMenu"));j=i&&i.prototype;function k(l,m){"use strict";j.constructor.call(this,l,m);c("DataStore").set("PrivacySelectableMenu",m.id,this);this._needsBootload=!!m.needsbootload;this.collapseMenu();this.updateOptionsAfterTagExpansion(!!m.hasTags)}k.prototype.cleanup=function(){"use strict";c("DataStore").remove("PrivacySelectableMenu",this._config.id)};k.prototype.getItemForIndex=function(l){"use strict";return this.findOption(function(m){return m.getIndex()==l})};k.prototype.findItem=function(l){"use strict";for(var m=this._items,n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var p;if(n){if(o>=m.length)break;p=m[o++]}else{o=m.next();if(o.done)break;p=o.value}var q=p;if(q instanceof c("PrivacySelectorSelectableItem")&&l(q))return q}return null};k.prototype.findOption=function(l){"use strict";return this.findItem(function(m){return m instanceof c("PrivacySelectorOptionNew")&&l(m)})};k.prototype.getSelectedOption=function(){"use strict";return this.findOption(function(l){return l.isSelected()})};k.prototype.selectOption=function(l){"use strict";var m=null,n=false,o=false;for(var p=this._items,q=Array.isArray(p),r=0,p=q?p:p[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var s;if(q){if(r>=p.length)break;s=p[r++]}else{r=p.next();if(r.done)break;s=r.value}var t=s;if(!(t instanceof c("PrivacySelectorSelectableItem")))continue;if(t instanceof c("PrivacySelectorCustomOption")){m=t;continue}if(t.isMoreButton()){this.expandMenuWithMore();continue}if(t.isMoreOptionsButton()||t.isSeeAllButton()){if(this._needsBootload)n=true;else this.expandMenu();continue}if(!n&&t instanceof c("PrivacySelectorOptionNew")&&t.getPostParam()==l){this.setValue(t.getIndex());o=true;break}}if(!o&&m){m.setPostParam(l);this.setValue(m.getIndex())}if(n){this.subscribeOnce("expandMenu",function(){this.selectOption(l)}.bind(this));this.expandMenu()}else this.inform("selectOption");return!n};k.prototype._handleItemClick=function(l,m){"use strict";if(!c("SelectableMenuUtils").doesItemSupportSelect(l))return j._handleItemClick.call(this,l,m);if(l.isMoreButton()){this._logMoreButtonClick();this.expandMenuWithMore();return undefined}if(l.isMoreOptionsButton()||l.isSeeAllButton()){this._logMoreOptionsOrSeeAllButtonClick();this.expandMenu();return undefined}if(!(l instanceof c("PrivacySelectorOptionNew")))return undefined;this._logOptionClick(l);var n=this.inform("itemclick",{item:l,event:m});if(n)return undefined;if(!c("SelectableMenuUtils").isSelected(l)&&!l.isCustomOption()&&!l.isSavedCustomOption()&&l.select()!==false){this._items.forEach(function(o){if(c("SelectableMenuUtils").isSelected(o)&&o!==l)o.deselect()});this.inform("change",this.getSelection())}c("Arbiter").inform("composerprivacy/aborteducation");this.done();return l.handleClick()};k.prototype._logMoreButtonClick=function(){"use strict";var l=c("XPrivacySelectorLoggingController").getURIBuilder().setString("content_type",this._config.contenttype).setEnum("event",c("PrivacySelectorEvent").MORE).setString("privacy_fbid",this._config.privacyfbid!=null?String(this._config.privacyfbid):null).setEnum("render_location",this._config.renderlocation).setBool("saved_custom_opt_in",this._config.savedCustomOptIn).getURI();new(c("AsyncRequest"))().setURI(l).send()};k.prototype._logMoreOptionsOrSeeAllButtonClick=function(){"use strict";var event=this._config.hasSavedCustom?c("PrivacySelectorEvent").SEE_ALL:c("PrivacySelectorEvent").MORE_OPTIONS,l=c("XPrivacySelectorLoggingController").getURIBuilder().setString("content_type",this._config.contenttype).setEnum("event",event).setString("privacy_fbid",this._config.privacyfbid!=null?String(this._config.privacyfbid):null).setEnum("render_location",this._config.renderlocation).setBool("saved_custom_opt_in",this._config.savedCustomOptIn).getURI();new(c("AsyncRequest"))().setURI(l).send()};k.prototype._logOptionClick=function(l){"use strict";var m=c("XPrivacySelectorLoggingController").getURIBuilder().setString("content_type",this._config.contenttype).setEnum("event",l.getLoggingEventName()).setString("privacy_fbid",this._config.privacyfbid!=null?String(this._config.privacyfbid):null).setEnum("render_location",this._config.renderlocation).setBool("saved_custom_opt_in",this._config.savedCustomOptIn).getURI();new(c("AsyncRequest"))().setURI(m).send()};k.prototype._getMoreOptionsOrSeeAllButton=function(){"use strict";return this.findItem(function(l){return l.isMoreOptionsButton()||l.isSeeAllButton()})};k.prototype.getCustomItem=function(){"use strict";return this.findOption(function(l){return l instanceof c("PrivacySelectorCustomOption")})};k.prototype._setMenuState=function(l){"use strict";var m=this.getRoot();c("CSS").conditionClass(m,"_po3",l!=="expanded");c("CSS").conditionClass(m,"_po4",l==="expanded");if(this._config.hasSavedCustom){c("CSS").conditionClass(m,"_n_v",l==="collapsed");c("CSS").conditionClass(m,"_n__",l!=="collapsed")}this._expanded=l==="expanded"};k.prototype.expandMenuWithMore=function(){"use strict";this._setMenuState("withMore");this.inform("expandMenuWithMore")};k.prototype.expandMenu=function(){"use strict";if(this._expanded)return;this._setMenuState("withMore");this._expanded=true;if(!this._needsBootload){this.expandMenuAfterLoaded();return}this._needsBootload=false;var l=this._getMoreOptionsOrSeeAllButton();if(l){this._moreOptionsIcon=l.getIcon();l.setIcon(this._config.morespinner);this._scrollToOption(l)}var m=Date.now(),n=c("XPrivacySelectorAsyncMoreController").getURIBuilder().setString("id",this._config.id).setInt("next_value",this._config.nextvalue).setEnum("render_location_enum",this._config.renderlocation).getURI();new(c("AsyncRequest"))().setURI(n).setRelativeTo(this.getRoot()).setErrorHandler(function(o){var p=1250-(Date.now()-m);setTimeout(function(){l&&l.setIcon(this._moreOptionsIcon);this._needsBootload=true;this._expanded=false}.bind(this),p>0&&l?p:0)}.bind(this)).send()};k.prototype.expandMenuAfterLoaded=function(){"use strict";this._setMenuState("expanded");if(this._moreOptionsIcon){var l=this._getMoreOptionsOrSeeAllButton();l&&l.setIcon(this._moreOptionsIcon);this._moreOptionsIcon=undefined}this.inform("expandMenu")};k.prototype.collapseMenu=function(){"use strict";this._setMenuState("collapsed")};k.prototype.updateOptionsAfterTagExpansion=function(l){"use strict";this._lastHasTagsUpdate=l;this.forEachItem(function(m){if(m instanceof c("PrivacySelectorOptionNew"))m.updateAfterTagExpansion(l,!!this._config.hasSimpleLabels)}.bind(this))};k.prototype.refreshTagExpansionLabels=function(){"use strict";this.updateOptionsAfterTagExpansion(!!this._lastHasTagsUpdate)};k.prototype.updateTagExpansionLabelAfterBootload=function(){"use strict";this.refreshTagExpansionLabels()};k.prototype.onPopoverOpen=function(l){"use strict";if(l&&l.isBelowFold()){if(this._needsBootload)this.subscribeOnce("expandMenu",function(){var m=this.getSelectedOption();m&&this._scrollToOption(m)}.bind(this));this.expandMenu();if(!this._needsBootload)this._scrollToOption(l)}else if(l&&l.isBelowSoftFold()){this.expandMenuWithMore();this._scrollToOption(l)}else this.collapseMenu()};k.prototype._scrollToOption=function(l){"use strict";if(!this._scrollableArea)return;var m=l.getRoot();if(m===null)return;var n=12,o=this._scrollableArea.getScrollTop(),p=o+this._scrollableArea.getClientHeight(),q=m.offsetTop+m.offsetHeight;if(q+n>p)this._scrollableArea.setScrollTop(o+q+n-p,true,{duration:Math.min(1e3,(q+n-p)*10),ease:c("Ease").sineOut})};f.exports=k}),null);
__d("PopoverButton",["csx","DOM","DOMQuery","isTextNode"],(function a(b,c,d,e,f,g,h){var i={setLabel:function j(k,l){var m=c("DOMQuery").find(k,"._55pe"),n=m.childNodes;for(var o=0;o<n.length;o++)if(c("isTextNode")(n[o])){c("DOM").replace(n[o],l);return}c("DOM").appendContent(m,l)}};f.exports=i}),null);
__d("PrivacyIconTypes",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({EVERYONE:"everyone",CUSTOM:"custom",FRIENDS:"friends",FRIENDS_OF_FRIENDS:"friends_of_friends",FRIENDS_EXCEPT_ACQUAINTANCES:"friends_except_acquaintances",FRIENDS_EXCEPT:"friends_except",SPECIFIC_FRIENDS:"specific_friends",MUTUAL_FRIENDS:"mutual_friends",ONLY_ME:"only_me",GROUP:"group",FACEBOOK:"facebook",SCHOOL_GROUP:"school_group",WORK_COMMUNITY:"work_community",LIST_MEMBERS:"list_members",GENERIC_LIST:"generic_list",CLOSE_FRIENDS:"close_friends",GOOD_FRIENDS:"good_friends",ACQUAINTANCES:"acquaintances",SCHOOL_LIST:"school_list",FAMILY_LIST:"family_list",LOCATION_LIST:"location_list",WORK_LIST:"work_list",APP_LIST:"app_list",GAMER_FRIENDS:"gamer_friends",EVENT:"event",GENDER_FEMALE:"gender_female",GENDER_MALE:"gender_male",NEARBY:"nearby",PARENTS:"parents",CLASSMATES:"classmates",NO_ICON:"no_icon"})}),null);
__d("PrivacySelectorDataStore",["ArbiterMixin","PrivacySelectorNewDispatcher","KeyedCallbackManager"],(function a(b,c,d,e,f,g){var h=new(c("KeyedCallbackManager"))(),i=babelHelpers["extends"]({},c("ArbiterMixin"),{get:function j(k,l){h.executeOrEnqueue(k,l)},hasValueChanged:function j(k){return!!h.getResource(k)}});c("PrivacySelectorNewDispatcher").register(function(j){if(j.saved_custom_privacy_type!=null){h.addResourcesAndExecute({saved_custom_update:{postParam:j.post_param,savedCustomPrivacyType:j.saved_custom_privacy_type,sourceSelectorID:j.unique_id,subtitles:j.subtitles}});i.inform("saved_custom_update")}if(j.selector_type){var k={};k[j.selector_type]={post_param:j.post_param,unique_id:j.unique_id,reload:j.reload,is_error:j.is_error,is_custom:j.is_custom,selector_type:j.selector_type,subtitles:j.subtitles};h.addResourcesAndExecute(k);i.inform("change")}});f.exports=i}),null);
__d("SavedCustomPrivacyType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({SPECIFIC_FRIENDS:"specific_friends",FRIENDS_EXCEPT:"friends_except"})}),null);
__d("XPrivacySpecificAudienceSelectorDialogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/privacy/specific_audience_selector_dialog/",{autosave:{type:"Bool",defaultValue:false},content_type:{type:"String"},fbid:{type:"String",required:true},option_id:{type:"String"},post_param:{type:"String"},privacy_type:{type:"Enum",required:true,enumType:1},render_location:{type:"Enum",required:true,enumType:1},return_uri:{type:"String"},cancel_uri:{type:"String"}})}),null);
__d("PrivacySelectorSavedCustomOption",["AsyncDialog","AsyncRequest","DataStore","PrivacySelectorEvent","PrivacySelectorOptionNew","SavedCustomPrivacyType","XPrivacySpecificAudienceSelectorDialogController"],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c("PrivacySelectorOptionNew"));i=h&&h.prototype;function j(k){"use strict";i.constructor.call(this,k)}j.prototype.getSelector=function(){"use strict";return this._selector};j.prototype.isBasicOption=function(){"use strict";return false};j.prototype.isSavedCustomOption=function(){"use strict";return true};j.prototype.getSavedCustomPrivacyType=function(){"use strict";return this._data.savedCustomPrivacyType};j.prototype.getLoggingEventName=function(){"use strict";switch(this._data.savedCustomPrivacyType){case c("SavedCustomPrivacyType").FRIENDS_EXCEPT:return c("PrivacySelectorEvent").SELECT_FRIENDS_EXCEPT;case c("SavedCustomPrivacyType").SPECIFIC_FRIENDS:return c("PrivacySelectorEvent").SELECT_SPECIFIC_FRIENDS;default:return c("PrivacySelectorEvent").SELECT_OTHER}};j.prototype.openDialog=function(k){"use strict";this._selector=k;c("DataStore").set(this._data.id,"PrivacySelectorCustomOption",this);var l=c("XPrivacySpecificAudienceSelectorDialogController").getURIBuilder().setBool("autosave",this._data.autosave).setString("content_type",k.getContentType()).setString("fbid",this._data.privacyFBID).setString("option_id",this._data.id).setString("post_param",this.getPostParam()).setEnum("privacy_type",this._data.savedCustomPrivacyType).setEnum("render_location",k.getRenderLocation()).getURI(),m=new(c("AsyncRequest"))().setURI(l).setRelativeTo(k.getTriggerButtonElement());c("AsyncDialog").send(m)};j.informSave=function(k){"use strict";var l=c("DataStore").get(k,"PrivacySelectorCustomOption");if(l instanceof j){var m=l.getSelector();m&&m.animateSavedCustomSave()}};f.exports=j}),null);
__d("XPrivacySelectorSavedCustomUpdateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/privacy/selector/update/saved_custom/",{})}),null);
__d("XPrivacySelectorUpdateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/privacy/selector/update/",{privacy_fbid:{type:"String",required:true},post_param:{type:"String",required:true},tags:{type:"IntVector"},render_location_enum:{type:"Enum",required:true,enumType:1},is_saved_on_select:{type:"Bool",defaultValue:false},should_return_tooltip:{type:"Bool",defaultValue:false},replace_on_select:{type:"Bool",defaultValue:false},prefix_tooltip_with_app_privacy:{type:"Bool",defaultValue:false},ent_id:{type:"String",required:true},reload_selector:{type:"Bool",defaultValue:false}})}),null);
__d("PrivacySelectorBase",["cx","fbt","Promise","regeneratorRuntime","Animation","Arbiter","ArbiterMixin","AsyncRequest","Button","CSS","CurrentUser","DataStore","DOM","Focus","Input","MenuStaticItem","PopoverButton","PopoverLoadingMenu","PrivacyConst","PrivacyIconTypes","PrivacySelectableMenu","PrivacySelectorCustomOption","PrivacySelectorDataStore","PrivacySelectorEvent","PrivacySelectorNewDispatcher","PrivacySelectorSavedCustomOption","Run","SubscriptionsHandler","TooltipData","XPrivacySelectorLoggingController","XPrivacySelectorSavedCustomUpdateController","XPrivacySelectorUpdateController","XUIError","$","bind","debounce","ge","mixin"],(function a(b,c,d,e,f,g,h,i){var j,k;j=babelHelpers.inherits(l,c("mixin")(c("ArbiterMixin")));k=j&&j.prototype;function l(m,n,o,p,q,r){"use strict";k.constructor.call(this);this._hasBeenCleanedUp=false;this._syncUpdateQueue=[];this._isWaitingForSavedCustom=false;this._config=r;c("DataStore").set(this._config.rootID,"selector",this);this._isSavedOnSelect=r.is_saved_on_select;this._privacyFBID=r.privacy_fbid;this._contentType=r.content_type;this._renderLocation=r.render_location;this._supportsTagExpansion=r.supports_tag_expansion;this._skipCleanup=r.skip_cleanup;this._prefixTooltipApps=r.should_prefix_tooltip_apps;this._shouldDisplayLabel=r.should_display_label;this._tags=r.tagged_uids;this._hasTags=this._tags.length>0;this._entID=r.ent_id;this._receivingUpdate=false;this._selectorSyncKey=r.selector_sync_key;this._previousParam=null;this._listeners=new(c("SubscriptionsHandler"))();this._spinnerCount=0;this._postParam=r.postParam;if(r.use_async_menu)this._listeners.addSubscriptions(this.getPopoverMenu().subscribe("setMenu",function(){this._menu=this.getPopoverMenu().getMenu();if(!(this._menu instanceof c("PrivacySelectableMenu")))return;this._onMenuLoad();this._onPopoverOpen();this.inform("asyncMenuLoaded")}.bind(this)));else this._onMenuLoad();if(this._selectorSyncKey||this._config.hasSavedCustomPrivacy)this._initSelectorSync();c("Run").onLeave(this._cleanup.bind(this))}l.prototype._cleanup=function(){"use strict";if(this._skipCleanup)return;var m=this.getSelectableMenu();if(m instanceof c("PrivacySelectableMenu"))m.cleanup();this._hasBeenCleanedUp=true;this._syncUpdateQueue=[];this._syncUpdatePromise=null;this._listeners&&this._listeners.release();this._listeners=null};l.prototype._initSelectorSync=function(){"use strict";if(this._selectorSyncKey)this._listeners&&this._listeners.addSubscriptions(c("PrivacySelectorDataStore").subscribe("change",function(){if(this._selectorSyncKey==null)return;c("PrivacySelectorDataStore").get(this._selectorSyncKey,function(m){this._enqueueAndExecuteSyncUpdate({type:"regular_update",payload:m})}.bind(this))}.bind(this)));if(this._config.hasSavedCustomPrivacy)this._listeners&&this._listeners.addSubscriptions(c("PrivacySelectorDataStore").subscribe("saved_custom_update",function(){c("PrivacySelectorDataStore").get("saved_custom_update",function(m){this._enqueueAndExecuteSyncUpdate({type:"saved_custom_update",payload:m})}.bind(this))}.bind(this)))};l.prototype._enqueueAndExecuteSyncUpdate=function(m){"use strict";this._syncUpdateQueue.push(m);if(this._syncUpdatePromise)return;this._syncUpdatePromise=this._startSyncUpdates();this._syncUpdatePromise.done(function(){this._syncUpdatePromise=null}.bind(this))};l.prototype._startSyncUpdates=function(){"use strict";return new(c("Promise"))(function m(n,o){var p;return c("regeneratorRuntime").async(function q(r){while(1)switch(r.prev=r.next){case 0:r.next=2;return c("regeneratorRuntime").awrap(this._waitUntilSelectorInDOM());case 2:if(!this._hasBeenCleanedUp){r.next=5;break}o();return r.abrupt("return");case 5:while(this._syncUpdateQueue.length){p=this._syncUpdateQueue.shift();this._executeSyncUpdate(p)}n();case 7:case"end":return r.stop()}},null,this)}.bind(this))};l.prototype._executeSyncUpdate=function(m){"use strict";if(m.type==="tags_changed"){this._executeTagsChangedUpdate(m.tags);return}var n=m.payload,o=this.getSelectableMenu();if(n.unique_id===o._config.id)return;this._receivingUpdate=true;switch(m.type){case"regular_update":c("XUIError").clear(this.getTriggerButtonElement());if(n.post_param)this.selectOption(n.post_param,function(){if(n.is_custom&&n.subtitles)this.updateCustomOption(n.subtitles)}.bind(this));n.reload&&this.reloadSelector();n.is_error&&this._displayErrorWithoutFocus();if(!n.post_param)this._receivingUpdate=false;break;case"saved_custom_update":if(o instanceof c("PrivacySelectableMenu")&&n.savedCustomPrivacyType!=null&&n.postParam!=null&&n.subtitles!=null)this.updateSavedCustomOption(n.savedCustomPrivacyType,n.postParam,n.subtitles);if(!this.shouldTryToUpdateSavedCustom())return;l._savedCustomSelectorsToUpdate.push(this);l._sendSavedCustomUpdateRequest();if(!n.postParam)this._receivingUpdate=false;break}};l.prototype._executeTagsChangedUpdate=function(m){"use strict";var n=!m.length;if(this._hasTags===n){this._hasTags=!!m.length;this.getSelectableMenu().updateOptionsAfterTagExpansion(this._showTagExpansion());this._updateTriggerButtonLabelAndIcon()}if(this._tags.length!==m.length||m.some(function(o){return!this._tags.includes(o)}.bind(this))){this._tags=m;this._updateTooltip();c("Arbiter").inform("PrivacySelectorBase/changed",this._getChangedData())}};l.prototype.shouldTryToUpdateSavedCustom=function(){"use strict";if(this.getSelectableMenu()instanceof c("PrivacySelectableMenu"))return this.getIsCustomOptionSelected()||this.getIsSavedCustomOptionSelected();for(var m=Object.keys(c("PrivacyConst").PostParam),n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var p;if(n){if(o>=m.length)break;p=m[o++]}else{o=m.next();if(o.done)break;p=o.value}var q=p;if(this._postParam===c("PrivacyConst").PostParam[q].toString())return false}return true};l.prototype._broadcastUpdate=function(){"use strict";this._broadcastUpdateImpl(false)};l.prototype._broadcastError=function(){"use strict";this._broadcastUpdateImpl(true)};l.prototype._broadcastUpdateImpl=function(m){"use strict";if(!this._receivingUpdate){var n={};n.selector_type=this._selectorSyncKey;n.unique_id=this.getSelectableMenu()._config.id;if(m)n.is_error=m;else{var o=this._getSelectedOption();if(!o)return;n.post_param=o.getPostParam();n.subtitles=o.getSubtitles();n.is_custom=o.isCustomOption();n.saved_custom_privacy_type=o.getSavedCustomPrivacyType()}c("PrivacySelectorNewDispatcher").handleUpdateFromSelector(n)}};l.prototype.disable=function(){"use strict";var m=this.getTriggerButtonElement();c("Button").setEnabled(m,false);this.getPopover().disable();c("CSS").addClass(m,"_4swv");return this};l.prototype.enable=function(){"use strict";var m=this.getTriggerButtonElement();c("Button").setEnabled(m,true);this.getPopover().enable();c("CSS").removeClass(m,"_4swv");return this};l.prototype.shouldReplaceOnPost=function(){"use strict";return this._config.replace_on_post};l.prototype.getSelectedTriggerIcon=function(){"use strict";return this._selectedOption&&this._selectedOption.getTriggerIcon()};l.prototype.getSelectedTriggerLabel=function(){"use strict";return this._selectedOption&&this._selectedOption.getTriggerLabel()};l.prototype.getSelectedIconType=function(){"use strict";return this._selectedOption&&this._selectedOption.getIconType()};l.prototype.getIsPublicSelected=function(){"use strict";return this._selectedOption&&this._selectedOption.isPublic()};l.prototype.getIsFriendsSelected=function(){"use strict";return this._selectedOption&&this._selectedOption.isFriends()};l.prototype.getIsOnlyMeSelected=function(){"use strict";return this._selectedOption&&this._selectedOption.isOnlyMe()};l.prototype.getSelectedBaseValue=function(){"use strict";return this._selectedOption&&this._selectedOption.getBaseValue()};l.prototype.getSelectedLabelString=function(){"use strict";return this._selectedOption&&this._selectedOption.getLabel()};l.prototype.getSelectedPostParam=function(){"use strict";return this._selectedOption&&this._selectedOption.getPostParam()};l.prototype.getIsCustomOptionSelected=function(){"use strict";return this._selectedOption&&this._selectedOption.isCustomOption()};l.prototype.getIsSavedCustomOptionSelected=function(){"use strict";return this._selectedOption&&this._selectedOption.isSavedCustomOption()};l.prototype.getIsSavedOnSelect=function(){"use strict";return this._isSavedOnSelect};l.prototype.getPrivacyFBID=function(){"use strict";return this._privacyFBID};l.prototype.setValue=function(m){"use strict";this.getSelectableMenu().setValue(m)};l.prototype.setIsSavedOnSelect=function(m){"use strict";this._isSavedOnSelect=m};l.prototype.getSavedCustomOptIn=function(){"use strict";return this._config.savedCustomOptIn};l.prototype.openSelectorExpanded=function(m){"use strict";this.openSelector(function(){this.getSelectableMenu().expandMenu();m&&m()}.bind(this))};l.prototype.openSelector=function(m){"use strict";if(this.getSelectableMenu()instanceof c("PopoverLoadingMenu")){this.subscribeOnce("asyncMenuLoaded",function(){m&&m()});this.getPopover().showLayer()}else{this.getPopover().showLayer();m&&m()}};l.prototype.closeSelector=function(){"use strict";this.getPopover().hideLayer()};l.prototype.getSelectableMenu=function(){"use strict";if(!this._menu)this._menu=this._config.getMenu();return this._menu};l.prototype.getPopover=function(){"use strict";if(!this._popover)this._popover=this.getPopoverMenu().getPopover();return this._popover};l.prototype.getPopoverMenu=function(){"use strict";if(!this._popoverMenu)this._popoverMenu=this._config.getPopoverMenu();return this._popoverMenu};l.prototype.getTriggerButtonElement=function(){"use strict";if(!this._button)this._button=c("$")(this._config.buttonID);return this._button};l.prototype.isSelectorInDOM=function(){"use strict";return!!c("ge")(this._config.rootID)};l.prototype._waitUntilSelectorInDOM=function m(){return c("regeneratorRuntime").async(function n(o){while(1)switch(o.prev=o.next){case 0:"use strict";case 1:if(!(!this._hasBeenCleanedUp&&!this.isSelectorInDOM())){o.next=6;break}o.next=4;return c("regeneratorRuntime").awrap(new(c("Promise"))(function(p){return setTimeout(p,1e3)}));case 4:o.next=1;break;case 6:case"end":return o.stop()}},null,this)};l.prototype.getRoot=function(){"use strict";if(!this._root)this._root=c("$")(this._config.rootID);return this._root};l.prototype.getInput=function(){"use strict";if(!this._input)this._input=c("$")(this._config.inputID);return this._input};l.prototype.getSpinner=function(){"use strict";if(!this._spinner)this._spinner=c("$")(this._config.spinnerID);return this._spinner};l.prototype.getCheckmark=function(){"use strict";if(!this._checkmark)this._checkmark=c("$")(this._config.checkmarkID);return this._checkmark};l.prototype.getErrorIcon=function(){"use strict";if(!this._errorIcon)this._errorIcon=c("$")(this._config.errorIconID);return this._errorIcon};l.prototype.getMenuElement=function(){"use strict";return this.getSelectableMenu().getRoot()};l.prototype.selectOption=function(m,n){"use strict";if(!m)return;var o=this.getSelectableMenu();if(o instanceof c("PopoverLoadingMenu")){this.subscribeOnce("asyncMenuLoaded",this._selectOptionImpl.bind(this,m,n));this._fetchAsyncMenu()}else this._selectOptionImpl(m,n)};l.prototype._selectOptionImpl=function(m,n){"use strict";var o=this.getSelectableMenu(),p=o.selectOption(m);if(!p){o.subscribeOnce("selectOption",function(){var q=this.getIsSavedOnSelect();this.setIsSavedOnSelect(false);this._updateMenu();this.setIsSavedOnSelect(q);this._finishSpinnerSuccess();n&&n()}.bind(this));this._showSpinner()}else n&&n();this._updateMenu()};l.prototype._updateMenu=function(){"use strict";this._selectedOption=this._getSelectedOption();if(!this._selectedOption)return;this.updateDataForItemIndex(this._selectedOption.getIndex(),this._selectedOption.getPostParam())};l.prototype._fetchAsyncMenu=function(){"use strict";if(this._config.use_async_menu)this.getPopoverMenu().fetchMenu()};l.prototype._getSelectedOption=function(){"use strict";var m=this.getSelectableMenu();return m instanceof c("PrivacySelectableMenu")?m.getSelectedOption():null};l.prototype._onItemClick=function(m,n){"use strict";var o=n.item;if(o instanceof c("MenuStaticItem"))return;if(o.isBasicOption())this.updateDataForItemIndex(o.getIndex(),o.getPostParam());else if(o.isCustomOption()||o.isSavedCustomOption()){this._closeForCustom=true;o.openDialog(this)}this.inform("click",{customSelected:o.isCustomOption()})};l.prototype.getContentType=function(){"use strict";return this._contentType};l.prototype.getRenderLocation=function(){"use strict";return this._renderLocation};l.prototype.getPostParam=function(){"use strict";return this._postParam};l.prototype.getTags=function(){"use strict";return this._tags};l.prototype.updateCustomOption=function(m){"use strict";var n=this.getSelectableMenu(),o=n.findOption(function(o){return o instanceof c("PrivacySelectorCustomOption")});if(o==null)return;o.setSubtitles(m);n.refreshTagExpansionLabels()};l.prototype.updateSavedCustomOption=function(m,n,o){"use strict";var p=this.getSelectableMenu(),q=p.findOption(function(q){return q instanceof c("PrivacySelectorSavedCustomOption")&&q.getSavedCustomPrivacyType()===m});if(q==null)return;q.setPostParam(n).setSubtitles(o);p.refreshTagExpansionLabels()};l.prototype.updateDataForItemIndex=function(m,n){"use strict";var o=this.getSelectableMenu(),p=o.getItemForIndex(String(m));if(!p)return;if(p.isCustomOption()||p.isSavedCustomOption())p.setPostParam(n);if(!p.isCustomOption()){var q=o.findOption(function(p){return p instanceof c("PrivacySelectorCustomOption")});if(q!=null){q.setSubtitlesToNonSelected();o.refreshTagExpansionLabels()}}this._selectedOption=p;this._previousParam=this._postParam;this._postParam=n;c("Input").setValue(this.getInput(),n);this._updateTriggerButtonLabelAndIcon();this._updateTooltipAndSavePrivacyIfNeeded();this.inform("changed",{post_param:this._postParam,base_value:this.getSelectedBaseValue()})};l.prototype._shouldUpdateTooltips=function(){"use strict";return this._prefixTooltipApps||this._supportsTagExpansion&&this._hasTags||this.getIsCustomOptionSelected()||this.getIsSavedCustomOptionSelected()};l.prototype._updateTooltip=function(){"use strict";this._updateTooltipAndSavePrivacyIfNeededImpl(false)};l.prototype._updateTooltipAndSavePrivacyIfNeeded=function(){"use strict";this._updateTooltipAndSavePrivacyIfNeededImpl(true)};l.prototype._updateTooltipAndSavePrivacyIfNeededImpl=function(m){"use strict";if(this._shouldUpdateTooltips())this._updateTooltipToLoading();this._sendUpdateRequest(m);if(!this._shouldUpdateTooltips())this._setTooltipValue(this._selectedOption.getTooltip())};l.prototype.reloadSelector=function(){"use strict";this._cleanup();var m=c("XPrivacySelectorUpdateController").getURIBuilder().setString("privacy_fbid",String(this._privacyFBID)).setString("post_param",this._postParam).setEnum("render_location_enum",this._renderLocation).setBool("reload_selector",true).setString("ent_id",String(this._entID)).getURI();new(c("AsyncRequest"))().setRelativeTo(this.getRoot()).setHandler(this.inform.bind(this,"reloaded")).setURI(m).send()};l.prototype._sendUpdateRequest=function(m){"use strict";m=m&&this._isSavedOnSelect&&!this._receivingUpdate;var n=this._shouldUpdateTooltips();if(!m&&!n){this._receivingUpdate=false;return}m&&this._showSpinner();var o=c("XPrivacySelectorUpdateController").getURIBuilder().setString("privacy_fbid",String(this._privacyFBID)).setString("post_param",this._postParam).setIntVector("tags",this._tags).setEnum("render_location_enum",this._renderLocation).setBool("is_saved_on_select",m).setBool("should_return_tooltip",n).setBool("prefix_tooltip_with_app_privacy",this._prefixTooltipApps).setBool("replace_on_select",this._config.replace_on_select).setString("ent_id",String(this._entID)).getURI();if(this._updateRequest)this._updateRequest.abandon();this._updateRequest=new(c("AsyncRequest"))(o).setRelativeTo(this.getRoot()).setHandler(function(p){if(m){this._finishSpinnerSuccess();this._broadcastUpdate()}if(this._config.replace_on_select)this._cleanup();var q=p&&p.payload&&p.payload.tooltip;q&&this._setTooltipValue(p.payload.tooltip);this.inform("selector_updated")}.bind(this)).setFinallyHandler(function(p){this._receivingUpdate=false;this._updateRequest=null}.bind(this));if(m)this._updateRequest.setErrorHandler(c("bind")(this,function(p){if(this._receivingUpdate){this._displayErrorWithoutFocus();return}this.getSelectableMenu().selectOption(this._previousParam);this._postParam=this._previousParam;this._displayError();this._broadcastError()}));this._updateRequest.send()};l.prototype.animateSavedCustomSave=function(){"use strict";if(this._isWaitingForSavedCustom)return;this._showSpinner();this._updateTooltipToLoading();if(this._shouldDisplayLabel)this._updateTriggerToLoading();this._isWaitingForSavedCustom=true};l.prototype.finishAnimatingSavedCustomSave=function(){"use strict";if(!this._isWaitingForSavedCustom)return;this._finishSpinnerSuccess();this._isWaitingForSavedCustom=false};l.prototype._showSpinner=function(){"use strict";if(!this._shouldDisplaySuccessAndFailure())return;if(!this.getIsSavedOnSelect())return;if(this._spinnerCount===0){var m=this.getTriggerButtonElement(),n=this.getSpinner();c("XUIError").clear(m);c("Button").setIcon(m,n);c("CSS").show(n);c("CSS").hide(this.getCheckmark())}this._spinnerCount++};l.prototype._finishSpinnerSuccess=function(){var m,n=this;"use strict";if(!this._shouldDisplaySuccessAndFailure())return;if(!this.getIsSavedOnSelect())return;this._spinnerCount--;if(this._spinnerCount===0){c("CSS").hide(this.getSpinner());this._updateTriggerButtonLabelAndIcon();var o=this.getCheckmark();if(o)(function(){var p=n.getTriggerButtonElement(),q=c("Button").getIcon(p);c("Button").setIcon(p,o);c("CSS").hide(q);new(c("Animation"))(o).show().from("opacity",0).to("opacity",1).duration(400).checkpoint().duration(200).checkpoint().from("opacity",1).to("opacity",0).duration(400).hide().ondone(function(){this._updateTriggerButtonLabelAndIcon();new(c("Animation"))(q).show().from("opacity",0).to("opacity",1).duration(300).go()}.bind(n)).go()})()}};l.prototype._displayError=function(){"use strict";if(!this._shouldDisplaySuccessAndFailure())return;this._spinnerCount--;this._displayErrorImpl(true)};l.prototype._displayErrorWithoutFocus=function(){"use strict";this._displayErrorImpl(false)};l.prototype._displayErrorImpl=function(m){"use strict";if(!this._shouldDisplaySuccessAndFailure())return;var n=this.getTriggerButtonElement(),o=this.getErrorIcon();c("PopoverButton").setLabel(n,i._("Select Audience"));c("Button").setIcon(n,o);c("CSS").show(o);c("TooltipData").remove(n);m&&c("Focus").setWithoutOutline(n);c("XUIError").set({target:n,message:i._("Your selection might not have been saved. We recommend trying again later.")})};l.prototype.informTagsChanged=function(m){"use strict";var n=this._getTags(m);this.informTagsChangedWithIDs(n)};l.prototype.informTagsChangedWithIDs=function(m){"use strict";this._enqueueAndExecuteSyncUpdate({type:"tags_changed",tags:m})};l.prototype._getChangedData=function(){"use strict";return{tags:this._tags,privacy:this.getSelectedBaseValue()}};l.prototype._showTagExpansion=function(){"use strict";return this._hasTags};l.prototype._getTags=function(m){"use strict";var n=[],o=c("CurrentUser").getID();if(m.withTags)for(var p=0;p<m.withTags.length;p++){var q=m.withTags[p].info;if(q.uid!=o)n.push(q.uid.toString())}if(m.mention)for(var r in m.mention)if(m.mention[r].type=="user"&&m.mention[r].uid!=o)n.push(m.mention[r].uid.toString());return n};l.prototype._updateTriggerButtonLabelAndIcon=function(){"use strict";if(this._shouldDisplaySuccessAndFailure()&&this._spinnerCount===0){var m=this.getTriggerButtonElement(),n=this._selectedOption.getTriggerIcon();if(this._config.trigger_no_icon)c("CSS").hide(n);c("Button").setIcon(m,n.cloneNode());c("CSS").conditionClass(c("Button").getIcon(m),"_21or",this.getSelectedIconType()===c("PrivacyIconTypes").EVERYONE)}if(!this._shouldDisplayLabel)return;if(!this._isWaitingForSavedCustom)c("PopoverButton").setLabel(this.getTriggerButtonElement(),this._selectedOption.getTriggerLabel())};l.prototype._getLoadingText=function(){"use strict";return i._("Loading...")};l.prototype._updateTooltipToLoading=function(){"use strict";this._setTooltipValue(this._getLoadingText())};l.prototype._updateTriggerToLoading=function(){"use strict";c("PopoverButton").setLabel(this.getTriggerButtonElement(),this._getLoadingText())};l.prototype._setTooltipValue=function(m){"use strict";m&&c("TooltipData").set(this.getTriggerButtonElement(),m)};l.prototype._onPopoverClose=function(){"use strict";if(!this._getSelectedOption())return;var m=c("XPrivacySelectorLoggingController").getURIBuilder().setString("content_type",this._contentType).setEnum("event",c("PrivacySelectorEvent").CLOSE_MENU).setString("privacy_fbid",this._privacyFBID!=null?String(this._privacyFBID):null).setEnum("render_location",this._renderLocation).setBool("saved_custom_opt_in",this._config.savedCustomOptIn).getURI();new(c("AsyncRequest"))().setURI(m).send();if(this._closeForCustom)this._closeForCustom=false;else this.inform("selectorFinished");this.inform("close")};l.prototype._onPopoverOpen=function(){"use strict";var m=this.getSelectableMenu();if(!(m instanceof c("PrivacySelectableMenu")))return;c("Arbiter").inform("composerprivacy/aborteducation");m.onPopoverOpen(this._getSelectedOption());var n=c("XPrivacySelectorLoggingController").getURIBuilder().setString("content_type",this._contentType).setEnum("event",c("PrivacySelectorEvent").OPEN_MENU).setString("privacy_fbid",this._privacyFBID!=null?String(this._privacyFBID):null).setEnum("render_location",this._renderLocation).setBool("saved_custom_opt_in",this._config.savedCustomOptIn).getURI();new(c("AsyncRequest"))().setURI(n).send();this.inform("open")};l.prototype._onMenuLoad=function(){"use strict";var m=this.getSelectableMenu();this._listeners&&this._listeners.addSubscriptions(m.subscribe("itemclick",this._onItemClick.bind(this)),this.getPopover().subscribe("hide",this._onPopoverClose.bind(this)),this.getPopover().subscribe("show",this._onPopoverOpen.bind(this)));this._listeners&&this._listeners.addSubscriptions(m.subscribe(["expandMenu","expandMenuWithMore"],function(){if(this.getPopover()&&this.getPopover().getLayer())this.getPopover().getLayer().updatePosition();this._selectedOption=this._getSelectedOption()}.bind(this)));this._selectedOption=this._getSelectedOption();if(this._selectedOption){this._postParam=this._selectedOption.getPostParam().toString();this._previousParam=this._postParam;this._hasAudienceExpansion()&&this._updateTriggerButtonLabelAndIcon()}};l.prototype._hasAudienceExpansion=function(){"use strict";return this._hasTags};l.prototype._shouldDisplaySuccessAndFailure=function(){"use strict";return!!((this._config.spinner||this._config.spinnerID)&&(this._config.checkmark||this._config.checkmarkID)&&(this._config.error_icon||this._config.errorIconID))};l._savedCustomSelectorsToUpdate=[];l._sendSavedCustomUpdateRequest=c("debounce")(function(){var m=l._savedCustomSelectorsToUpdate;l._savedCustomSelectorsToUpdate=[];var n={},o={},p=false;for(var q=m,r=Array.isArray(q),s=0,q=r?q:q[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var t;if(r){if(s>=q.length)break;t=q[s++]}else{s=q.next();if(s.done)break;t=s.value}var u=t;n[u._postParam]=true;o[u._config.trigger_style]=true;p=p||u._menu instanceof c("PopoverLoadingMenu")}if(this._savedCustomUpdateRequest)this._savedCustomUpdateRequest.abandon();this._savedCustomUpdateRequest=new(c("AsyncRequest"))(c("XPrivacySelectorSavedCustomUpdateController").getURIBuilder().getURI()).setData({has_async_menu:p,post_params:Object.keys(n),trigger_icon_styles:Object.keys(o)}).setHandler(function(v){var w=v.payload||{},x=w.post_param_map||{},y=w.data||{},z=c("DOM").create("div",{className:"hidden_elem"});for(var A=m,B=Array.isArray(A),C=0,A=B?A:A[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var D;if(B){if(C>=A.length)break;D=A[C++]}else{C=A.next();if(C.done)break;D=C.value}var E=D,F=x[E._postParam];if(!F)continue;if(E._menu instanceof c("PopoverLoadingMenu")){var G=y[F]||{};E._postParam=F;if(!E._config.trigger_no_icon){var H=G.icons[E._config.trigger_style];if(H!=null){c("DOM").setContent(z,H);var I=z.firstChild;c("Button").setIcon(E._button,I)}}if(E._shouldDisplayLabel){var J=G.label;J!=null&&c("PopoverButton").setLabel(E._button,J)}}else if(E._menu instanceof c("PrivacySelectableMenu")){E._receivingUpdate=true;E.selectOption(F);E._receivingUpdate=false}}c("DOM").remove(z)}).setFinallyHandler(function(){this._savedCustomUpdateRequest=null}.bind(this));this._savedCustomUpdateRequest.send()}.bind(this),10,this);f.exports=l}),null);
__d("AttachmentIssueDiversityShareConstants",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ARTICLE_CLICK:"issueDiversity/article_click"})}),null);
__d("PubcontentFeedChainingControllerLoader",["Arbiter","AttachmentIssueDiversityShareConstants","AttachmentRelatedShareConstants","Bootloader","PageLikeConstants","SubscriptionsHandler","UFIUIEvents"],(function a(b,c,d,e,f,g){var h=[c("PageLikeConstants").LIKED,c("UFIUIEvents").ActionLinkLike,c("UFIUIEvents").ReactionButtonClicked,c("UFIUIEvents").Comment,c("UFIUIEvents").ActionAddComment,"composer/publish","LitestandComposer/publish",c("AttachmentRelatedShareConstants").ARTICLE_CLICK,c("AttachmentIssueDiversityShareConstants").ARTICLE_CLICK,c("AttachmentRelatedShareConstants").VIDEO_CLICK,c("AttachmentRelatedShareConstants").FBVIDEO_CLICK,c("AttachmentRelatedShareConstants").FBVIDEO_VIEW,c("AttachmentRelatedShareConstants").GAME_CLICK,c("AttachmentRelatedShareConstants").PHOTO_CLICK,c("AttachmentRelatedShareConstants").EVENT_JOIN,c("AttachmentRelatedShareConstants").PRODUCT_CLICK,c("AttachmentRelatedShareConstants").MAP_CLICK,c("AttachmentRelatedShareConstants").ACTION_BUTTON_CLICK],i=null,j=false,k=null,l=null,m=null,n={init:function o(p,q){l=p;m=q;if(k)k.init({isLazy:false,srs:l,sdrs:m});else this._startListening()},_startListening:function o(){if(i)return;i=new(c("SubscriptionsHandler"))();i.addSubscriptions(c("Arbiter").subscribe(h,function(event,p){c("Arbiter").inform(event+".lazy",p,c("Arbiter").BEHAVIOR_PERSISTENT);this._bootload()}.bind(this)))},_bootload:function o(){if(j)return;j=true;c("Bootloader").loadModules(["PubcontentFeedChainingControllerX"],function(f){i&&i.release();k=f;k.init({isLazy:true,srs:l,sdrs:m})},"PubcontentFeedChainingControllerLoader")}};f.exports=n}),null);
__d("ReactFeedComposerXBody",["DOM","Event","SubscriptionsHandler"],(function a(b,c,d,e,f,g){"use strict";function h(i){this.$ReactFeedComposerXBody2=i.root;this.$ReactFeedComposerXBody4=c("DOM").find(this.$ReactFeedComposerXBody2,"textarea");this.$ReactFeedComposerXBody1=c("DOM").find(this.$ReactFeedComposerXBody2,'input[type="hidden"]');this.$ReactFeedComposerXBody3=new(c("SubscriptionsHandler"))();this.$ReactFeedComposerXBody3.addSubscriptions(c("Event").listen(this.$ReactFeedComposerXBody4,"change",this.$ReactFeedComposerXBody5.bind(this)))}h.prototype.$ReactFeedComposerXBody5=function(i){this.$ReactFeedComposerXBody1.value=i.target.value};f.exports=h}),null);
__d("SISketchSurface",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({FEED:"feed",LOGIN:"login",REG:"registration"})}),null);
__d("XSISketchResultsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/sketch_results/",{})}),null);
__d("Sketch",["nullthrows","md5","Alea","AsyncRequest","XSISketchResultsController","Form","Base64","SISketchSurface","performanceNow","JSReliabilityFixesGatingConfig"],(function a(b,c,d,e,f,g){function h(j,k,l){"use strict";this.seed=j;this.rounds=k;this.rng=c("Alea")(j);this.ctx=c("nullthrows")(l.getContext("2d"));this.width=l.width;this.height=l.height}h.prototype.solve=function(){"use strict";for(var j=0;j<this.rounds;j++)switch(this.pickPrimitive(j)){case"text":this.drawText();break;case"bezier":this.drawBezier();break;case"circle":this.drawCircle();break;case"emoji":this.drawEmoji();break}};h.prototype.solveOnePrimitive=function(j){"use strict";for(var k=0;k<this.rounds;k++)switch(j){case"text":this.drawText();break;case"bezier":this.drawBezier();break;case"circle":this.drawCircle();break;case"emoji":this.drawEmoji();break}};h.prototype.pickPrimitive=function(j){"use strict";var k=["emoji","circle","bezier","text"];return k[j%k.length]};h.prototype.drawText=function(){"use strict";var j=Math.floor(this.rng()*50+100);this.ctx.font=j+"px Arial";var k=Math.floor(this.rng()*100).toString(),l=Math.floor(this.rng()*this.width/2),m=this.rngRange(j*2,this.height-j);this.ctx.fillStyle=this.makeRadialGradient();this.applyShadow();this.ctx.fillText(k,l,m)};h.prototype.drawEmoji=function(){"use strict";var j=Math.floor(this.rng()*50+100);this.ctx.font=j+"px Arial";var k="\ud83d\ude03",l=Math.floor(this.rng()*this.width/2),m=this.rngRange(j*2,this.height-j);this.ctx.fillStyle=this.makeRadialGradient();this.applyShadow();this.ctx.fillText(k,l,m)};h.prototype.drawBezier=function(){"use strict";this.ctx.beginPath();var j=this.rng()*this.width,k=this.rng()*this.height,l=this.rng()*this.width,m=this.rng()*this.height,n=this.rng()*this.width,o=this.rng()*this.height;this.ctx.moveTo(j,k);this.ctx.bezierCurveTo(this.rng()*this.width,this.rng()*this.height,this.rng()*this.width,this.rng()*this.height,l,m);this.ctx.bezierCurveTo(this.rng()*this.width,this.rng()*this.height,this.rng()*this.width,this.rng()*this.height,n,o);this.ctx.bezierCurveTo(this.rng()*this.width,this.rng()*this.height,this.rng()*this.width,this.rng()*this.height,j,k);this.ctx.fillStyle=this.makeRadialGradient();this.applyShadow();this.ctx.fill()};h.prototype.drawCircle=function(){"use strict";this.ctx.beginPath();this.ctx.arc(this.rng()*this.width,this.rng()*this.height,this.rng()*this.width/5,0,2*Math.PI);this.ctx.fillStyle=this.makeRadialGradient();this.applyShadow();this.ctx.fill();this.ctx.lineWidth=2;this.ctx.strokeStyle=this.makeRadialGradient();this.ctx.stroke()};h.prototype.makeRadialGradient=function(){"use strict";var j=this.ctx.createRadialGradient(this.rng()*this.width,this.rng()*this.height,0,this.rng()*this.width,this.rng()*this.height,this.width*2);j.addColorStop(0,this.makeColor());j.addColorStop(.5,this.makeColor());j.addColorStop(1,this.makeColor());return j};h.prototype.makeColor=function(){"use strict";var j=Math.floor(this.rng()*255),k=Math.floor(this.rng()*255),l=Math.floor(this.rng()*255);return"rgb("+j+","+k+","+l+")"};h.prototype.applyShadow=function(){"use strict";this.ctx.shadowColor=this.makeColor();this.ctx.shadowBlur=this.rng()*50;this.ctx.shadowOffsetX=this.rng()*15;this.ctx.shadowOffsetY=this.rng()*15};h.prototype.rngRange=function(j,k){"use strict";var l=Math.min(j,k),m=Math.max(j,k);return this.rng()*(m-l)+l};var i={solveIntern:function j(k,l,m,n){var o=i.solve(k,m,n);l.textContent=o.hash},solveAndCallAsyncController:function j(k,l,m){var n=i.createCanvasAndSolve(k,l,m),o=i.encode(n),p=c("XSISketchResultsController").getURIBuilder().getURI();new(c("AsyncRequest"))().setURI(p).setMethod("POST").setData({skstamp:o}).send()},solveAndUpdateForm:function j(k,l,m,n){var o=i.createCanvasAndSolve(k,l,m);if(n=="login_form")o.surface=c("SISketchSurface").LOGIN;else if(n=="reg")o.surface=c("SISketchSurface").REG;else o.surface="";var p=i.encode(o),q=document.getElementById(n);c("Form").createHiddenInputs({skstamp:p},q)},solveAllPrimitivesAndCallAsyncController:function j(k,l,m){var n=i.createCanvasAndSolveAllPrimitives(k,l,m),o=i.encode(n),p=c("XSISketchResultsController").getURIBuilder().getURI();new(c("AsyncRequest"))().setURI(p).setMethod("POST").setData({skstamp:o}).send()},createCanvasAndSolve:function j(k,l,m){var n=document.createElement("canvas");n.width=200;n.height=200;n.style.display="none";var o={};o.rounds=m;o.seed=k;o.seed2=l;c("nullthrows")(document.body).appendChild(n);var p=i.solve(n,k,m),q=i.solve(n,l,m);o.hash=p.hash;o.hash2=q.hash;o.time_taken=p.time_taken+q.time_taken;c("nullthrows")(document.body).removeChild(n);return o},solve:function j(k,l,m){var n=new h(l,m,k);n.ctx.clearRect(0,0,n.width,n.height);var o,p;if(c("JSReliabilityFixesGatingConfig").should_get_fix){o=c("performanceNow")();n.solve();p=c("performanceNow")()}else{o=performance.now();n.solve();p=performance.now()}var q=parseInt((p-o)*1e3,10),r=c("md5")(k.toDataURL()),s={hash:r,time_taken:q};return s},createCanvasAndSolveAllPrimitives:function j(k,l,m){var n=document.createElement("canvas");n.width=200;n.height=200;n.style.display="none";var o={rounds:m,seed:k,hash:"",seed2:l,hash2:"",time_taken:0,hash_text:"",hash_bezier:"",hash_circle:"",hash_emoji:""};c("nullthrows")(document.body).appendChild(n);var p=i.solve(n,k,m),q=i.solve(n,l,m);o.hash=p.hash;o.hash2=q.hash;o.time_taken=p.time_taken+q.time_taken;o.hash_text=i.solvePrimitive(n,k,m,"text");o.hash_bezier=i.solvePrimitive(n,k,m,"bezier");o.hash_circle=i.solvePrimitive(n,k,m,"circle");o.hash_emoji=i.solvePrimitive(n,k,m,"emoji");c("nullthrows")(document.body).removeChild(n);return o},solvePrimitive:function j(k,l,m,n){var o=new h(l,m,k);o.ctx.clearRect(0,0,o.width,o.height);o.solveOnePrimitive(n);var p=c("md5")(k.toDataURL());return p},encode:function j(k){return c("Base64").encode(JSON.stringify(k))}};f.exports=i}),null);
__d("FeedAdsGapRuleViolationDetectionFix",["csx","Banzai","BanzaiODS","CSS","DataAttributeUtils","DOM","ge","isEmpty","$"],(function a(b,c,d,e,f,g,h){var i="ei",j="qid",k="gap rule violation",l="non violating ads gap",m="non violating ego gap",n="first position violation",o="not first position violation",p="feed load",q="first position invalidation",r="spacing invalidation",s="ego_pymk",t="ego_other",u=[],v=[],w=[],x=[],y=[],z={},A={},B={},C=[],D={registerFeedStories:function E(F,G){if(F.containerID=="substream_0"){u=[];v=[]}var H=c("ge")(F.containerID);if(!H)return;B=F.egoGapRule;C=F.invalidateEgo?F.egoStories:{};z=babelHelpers["extends"]({},F.demoAdChecks,z);var I=D._getAllStoriesFromContainer(H);if(F.isLoggingEnabled&&I.length!==0)D._logFeedLoad();if(F.isNewerStories)u=I.concat(u);else u=u.concat(I);for(var J in F.minGaps)if(Object.prototype.hasOwnProperty.call(F.minGaps,J))A[J]=F.minGaps[J];if(c("isEmpty")(z)){if(F.isLoggingEnabled)D._checkFirstPosViolation(F,H);if(F.isLoggingEnabled||F.isGapRuleInvalidationEnabled)D._checkGapRuleViolation(F)}},_getAllStoriesFromContainer:function E(F){return c("DOM").scry(F,"div._5jmm").map(D._convertStoryNodeToObject).filter(function(G){return G!==null})},_convertStoryNodeToObject:function E(F){if(c("CSS").matchesSelector(F,"._170y"))return null;var G=F.getAttribute("data-dedupekey");if(z[G])return null;var H=c("DOM").scry(F,"div._hye"),I=c("DOM").scry(F,"li._170x"),J=[];if(H.length!==0)J=H.map(function(M){return c("DataAttributeUtils").getDataFt(M)}).filter(function(M){return M!==null});else if(I.length!==0)J=I.map(function(M){return c("DataAttributeUtils").getDataFt(M)}).filter(function(M){return M!==null});else if(c("DataAttributeUtils").getDataFt(F))J=[c("DataAttributeUtils").getDataFt(F)];if(!J.length)return null;var K=JSON.parse(J[0]),L={dataFTArray:J,dedupKey:G,isSponsored:!!K[i],isEgoPymk:C[G]===s,isEgoOther:C[G]===t,height:F.offsetHeight,qid:parseInt(K[j],10),nodeID:F.id};return L},_checkFirstPosViolation:function E(F,G){if(u.length>0&&!u[0].isSponsored){var H={qid:u[0].qid};if(F.isLoggingEnabled&&!(u[0].dedupKey in y)){D._logNotFirstPosViolation(H);y[u[0].dedupKey]=H}}while(u.length>0&&u[0].isSponsored){var H={ftArray:u[0].dataFTArray,qid:u[0].qid,nodeid:u[0].nodeID,firstStoryType:F.firstStoryType},I=c("DOM").scry(G,".uiBoxRed")[0];if(I){var J=I.textContent||I.innerText;if(J)H.error_msg=J}if(F.isLoggingEnabled&&!(u[0].dedupKey in x)){D._logFirstPosViolation(H);x[u[0].dedupKey]=H}break}},_getMinGap:function E(F,G,H){var I=Math.min(F?F:Number.MAX_VALUE,G?G:Number.MAX_VALUE);return I!==Number.MAX_VALUE?I:H},_getStoryDedupKeys:function E(){return u.map(function(F){return F.dedupKey})},_getStoryDedupKeysJSONString:function E(F,G){var H=[];for(var I=F;I<=G;I++)H.push(u[I].dedupKey);return JSON.stringify(H)},_getIdxOfStoryToSwap:function E(F,G){if(G>=u.length-F)return-1;for(var H=F+1;H<u.length&&G>0;H++){if(!u[H].isSponsored&&!u[H].isEgoPymk&&!u[H].isEgoOther)G--;else return-1;if(G===0)return H}return-1},_checkGapRuleViolation:function E(F){var G=null,H=null,I=null;for(var J=0;J<u.length;J++){var K=u[J],L=c("ge")(K.nodeID);if(!L||!c("CSS").shown(L)){u.splice(J,1);continue}if(K.isSponsored){var M=false,N=false;if(H!==null){var O=J-H,P=null,Q=null;if(G===H)Q=D._getMinGap(A[I.dedupKey],A[K.dedupKey],F.defaultMinGap);else Q=D._getMinGapBetweenStories(I,K);var R=null;if(O<Q){P=k;R=H}else{P=l;R=G}if(F.isLoggingEnabled)if(!(K.dedupKey in v)||v[K.dedupKey].event_type!==P){D._logGapEvent(P,R,J);v[K.dedupKey]={event_type:P}}if(F.isGapRuleInvalidationEnabled&&P==k){var S=-1;if(F.isSwapOnGapRuleViolationEnabled)S=D._getIdxOfStoryToSwap(J,Q-O);if(S>0){D._shiftAdOrEgoBelowOrganicStory(K.nodeID,u[S].nodeID);var T=u[J];u.splice(J,1);u.splice(S,0,T);if(F.isLoggingEnabled){var U={ft:u[S].dataFTArray[0],dist:S-J,qid:u[S].qid,event_type:"ad_swap"};c("Banzai").post("feed_ads_gap_rule_violation",U)}N=true}else if(F.isGapRuleInvalidationEnabled){D._invalidateGapRuleViolatedAd(I,K);M=true;u.splice(J--,1)}}}if(!M&&!N){G=J;H=J;I=K}}if(F.invalidateEgo&&(K.isEgoPymk||K.isEgoOther)){var V=false;if(H!==null){var W=J-H,X=D._getMinGapBetweenStories(I,K);if(W<X){V=true;var Y=-1,Z=X-W,$=J+1;for(;$<u.length;$++){if(u[$].isSponsored||u[$].isEgoPymk||u[$].isEgoOther)break;else Z--;if(Z===0){Y=$;break}}if(Y>0)D._swapAndLogEgo(J,$);else{D._invalidateAndLogEgo(J);J--}}else if(F.shouldLogEgo&&!w[K.dedupKey]){w[K.dedupKey]=true;D._logGapEvent(m,H,J)}}if(!V){H=J;I=K}}}},_getMinGapBetweenStories:function E(F,G){var H="";if(F.isSponsored||F.isEgoOther)H="ad";else if(F.isEgoPymk)H="pymk";else return 0;var I="";if(G.isSponsored||G.isEgoOther)I="ad";else if(G.isEgoPymk)I="pymk";else return 0;return B[H+"_"+I]},_swapAndLogEgo:function E(F,G){D._shiftAdOrEgoBelowOrganicStory(u[F].nodeID,u[G].nodeID);var H=u[F];u.splice(F,1);u.splice(G,0,H);c("BanzaiODS").bumpEntityKey("feed_ego_invalidation","swap")},_invalidateAndLogEgo:function E(F){var G=c("ge")(u[F].nodeID);G&&c("CSS").hide(G);u.splice(F,1);c("BanzaiODS").bumpEntityKey("feed_ego_invalidation","invalidate")},_logFirstPosViolation:function E(F){var G={ft:F.ftArray[0],event_type:n,intValues:{qid:F.qid},first_story_type:F.firstStoryType};if(F.error_msg)G.error_msg=F.error_msg;c("Banzai").post("feed_ads_gap_rule_violation",G)},_logNotFirstPosViolation:function E(F){var G={event_type:o,intValues:{qid:F.qid}};if(F.error_msg)G.error_msg=F.error_msg;c("Banzai").post("feed_ads_gap_rule_violation",G)},_logGapEvent:function E(F,G,H){if(G===null)return;var I=u[G],J=u[H],K=0;for(var L=G+1;L<H;L++)K+=u[L].height;var M={ft_A:I.dataFTArray[0],ft_B:J.dataFTArray[0],event_type:F,intValues:{dist:H-G,pdist:K,pos:H+1,qid_A:I.qid,qid_B:J.qid},strValues:{previous_unit_type:D._getUnitTypeForLogging(I),unit_type:D._getUnitTypeForLogging(J)},dedup_keys:D._getStoryDedupKeysJSONString(G,H)};c("Banzai").post("feed_ads_gap_rule_violation",M)},_getUnitTypeForLogging:function E(F){if(F.isSponsored)return"ad";else if(F.isEgoPymk)return"pymk";else if(F.isEgoOther)return"ego_other";return null},_logFeedLoad:function E(){var F={event_type:p};c("Banzai").post("feed_ads_gap_rule_violation",F)},_invalidateFirstPosAd:function E(F){c("CSS").hide(c("$")(F.nodeid));var G={ft_array:F.ftArray,event_type:q};c("Banzai").post("feed_ads_gap_rule_violation",G)},_invalidateGapRuleViolatedAd:function E(F,G){var H=c("ge")(G.nodeID);H&&c("CSS").hide(H);var I={ft_array_A:F.dataFTArray[0],ft_array_B:G.dataFTArray[0],event_type:r};c("Banzai").post("feed_ads_gap_rule_violation",I)},_shiftAdOrEgoBelowOrganicStory:function E(F,G){var H=c("ge")(F),I=c("ge")(G);H&&I&&c("DOM").insertAfter(I,H)}};f.exports=D}),null);
__d("FeedErrorDetection",["csx","Banzai","CSS","DataAttributeUtils","DOM","ge"],(function a(b,c,d,e,f,g,h){var i=0,j={},k=false,l=false;function m(event,o,p,q){var r={event:event,shouldLogDetail:o,site:"www"};if(o){r.intValues=p;r.normalValues=q}c("Banzai").post("feed_error_detection",r,{delay:0})}var n={registerFeedStories:function o(p,q){if(p=="substream_0"){i=0;j={};k=false;l=false}var r=c("DOM").scry(c("ge")(p),"._5jmm"),s=r.length;if(!s&&!k){if(!l){l=true;return}if(!i)m("empty_feed_js",q,{},{});else m("end_of_feed_js",q,q?{stories_count:i}:{},{});k=true;return}l=false;for(var t=0;t<s;t++){var u=r[t],v=u.getAttribute("data-dedupekey"),w=c("DataAttributeUtils").getDataFt(u);if(!v||!w)continue;if(v in j){var x={};if(q)x={dedupKey:v,ft_A:w,ft_B:j[v]};m("duplicate_stories",q,{},{dup_field:x})}else{j[v]=w;i++}}}};f.exports=n}),null);
__d("StoryPositionTracking",["csx","DataAttributeUtils","DOM","ge"],(function a(b,c,d,e,f,g,h){var i="._5jmm",j=0,k={registerNewStories:function l(m){if(m=="substream_0")j=0;c("DOM").scry(c("ge")(m),i).forEach(function(n){var o=JSON.parse(c("DataAttributeUtils").getDataFt(n));if(o){o.insertion_position=j++;c("DataAttributeUtils").setDataFt(n,JSON.stringify(o))}})}};f.exports=k}),null);
__d("FbFeedAttachmentRelatedShare",["csx","Arbiter","AttachmentIssueDiversityShareConstants","AttachmentRelatedShareConstants","DOMQuery","Event","tidyEvent"],(function a(b,c,d,e,f,g,h){var i={loadRelatedAttachment:function j(k,l){c("tidyEvent")(c("Event").listen(k,"click",function(){c("Arbiter").inform(c("AttachmentRelatedShareConstants").ARTICLE_CLICK,{attachment:k,global_share_id:l})}))},loadRelatedGameAttachment:function j(k,l){c("tidyEvent")(c("Event").listen(k,"click",function(){c("Arbiter").inform(c("AttachmentRelatedShareConstants").GAME_CLICK,{attachment:k,global_share_id:l})}))},loadRelatedAttachmentForStream:function j(k){i._loadChainableAttachmentForStreamImpl(k,c("AttachmentRelatedShareConstants").ARTICLE_CLICK)},loadIssueDiversityAttachmentForStream:function j(k){i._loadChainableAttachmentForStreamImpl(k,c("AttachmentIssueDiversityShareConstants").ARTICLE_CLICK)},_loadChainableAttachmentForStreamImpl:function j(k,l){var m=function m(event,n){var o=event.getTarget();if(o.getAttribute("target")!=="_blank")return;var p="^div._5pbx",q="^div._5pc9",r=c("DOMQuery").scry(o,p)[0]||c("DOMQuery").scry(o,q)[0];if(!r)return;c("Arbiter").inform(l,{attachment:r,global_share_id:0,link_url:o.getAttribute("href"),is_right_click:n})};c("tidyEvent")(c("Event").listen(k,"click",function(event){m(event,false)}));c("tidyEvent")(c("Event").listen(k,"mousedown",function(event){if(event.which==3||event.button==2)m(event,true)}))}};f.exports=i}),null);
__d("FbFeedViewportTracking",["csx","Arbiter","LitestandMessages","LitestandStream","StreamViewportTracking","viewportTrackingBuilder"],(function a(b,c,d,e,f,g,h){"use strict";var i,j;i=babelHelpers.inherits(k,c("StreamViewportTracking"));j=i&&i.prototype;k.prototype.init=function(n){j.init.call(this,n);this.subscriptions.addSubscriptions(c("Arbiter").subscribe(c("LitestandMessages").STORIES_INSERTED,function(){return this.invalidateAllStoriesCache()}.bind(this)),c("Arbiter").subscribe(c("LitestandMessages").LEAVE_HOME,function(){return this.updateTimeTrackingData(true)}.bind(this)))};k.prototype.getSessionID=function(){return c("LitestandStream").isReady()?c("LitestandStream").getFeedStreamID():null};k.prototype.cleanup=function(){l.clearSingleton();j.cleanup.call(this)};function k(){i.apply(this,arguments)}var l=c("viewportTrackingBuilder")(function(n){var o=c("StreamViewportTracking").getBehavior(n,c("LitestandStream").getStreamRoot(),"._5jmm"),p=new k(o);p.init(n);return p}),m=babelHelpers["extends"]({},l,{init:function n(o){return this.factory(o)}});f.exports=m}),null);
__d("AdBlockerDetectorLogging",["Banzai","DataAttributeUtils","ErrorUtils","Run","getElementPosition","hasAdblock"],(function a(b,c,d,e,f,g){var h=1,i=2,j=3,k="swank",l={doAdBlockCheck:function m(n,o){c("Run").onAfterLoad(function(){c("ErrorUtils").applyWithGuard(function(){this._doAdBlockImgCheck(n,o.token||o,0)}.bind(this),this)}.bind(this))},gatherImageHiddenStyleDebugData:function m(n,o){c("Run").onAfterLoad(function(){c("ErrorUtils").applyWithGuard(function(){this._gatherImageHiddenStyleDebugData(n,o.token||o)}.bind(this),this)}.bind(this))},_gatherImageHiddenStyleDebugData:function m(n,o){if(!o||!n)return;var p=n.querySelectorAll("img"),q=[];if(p.length>0)for(var r=0;r<p.length;r++){var s=p[r],t=c("getElementPosition")(s);if(window.getComputedStyle(s).visibility==="hidden"){var u={w:t.width,h:t.height,ii:r,ic:p.length};q.push(u)}}if(q.length>0){var v=n,w=0;while(v!==null){if(w++>50)break;if(v){if(v.classList.contains("hidden_elem")||v.classList.contains("holdoutAdStory")||v.classList.contains("ego_ads_holdout"))return;v=v.parentElement}}for(r=0;r<q.length;r++)c("Banzai").post("xtrackable:"+k,{token:o,event_code:3,debug:q[r]})}},checkImageLoadStatus:function m(n){var o=this;c("ErrorUtils").applyWithGuard(function(){setTimeout(function(){o._checkImageLoadStatus(n)},1e4)},o)},_doAdBlockImgCheck:function m(n,o,p){if(!o||!n)return;var q=n.querySelectorAll("img");if(q.length>0){var r=false,s=0;for(var t=0;t<q.length;t++){var u=q[t],v=c("getElementPosition")(u);if(v.width>0||v.height>0){if(window.getComputedStyle(u).visibility==="hidden")s++;r=true}}if(!r||s>0){var w=n,x=0;while(w!==null){if(x++>50)break;if(w){if(w.classList.contains("hidden_elem")||w.classList.contains("holdoutAdStory")||w.classList.contains("ego_ads_holdout"))return;w=w.parentElement}}if(s>0)c("Banzai").post("xtrackable:"+k,{token:o,event_code:2});if(!r)c("Banzai").post("xtrackable:"+k,{token:o})}}else if(q.length===0&&o.startsWith("7."))if(++p<5)setTimeout(function(){this._doAdBlockImgCheck(n,o,p)}.bind(this),2500)},_checkImageLoadStatus:function m(n){var o=n.querySelector("img");if(o&&(!o.complete||!o.naturalWidth)){var p=this._findParentImpressionToken(n);c("Banzai").post("xtrackable:"+k,{token:p,event_code:1})}},_findParentImpressionToken:function m(n){var o=c("DataAttributeUtils").getParentByAttributeOrDataStoreKey(n,"data-xt","data-xt");return o?c("DataAttributeUtils").getDataAttribute(o,"data-xt"):null},doHasAdBlockCheck:function m(){c("hasAdblock")(function(n){var o={};o[j]=n;c("Banzai").post("search_check",o)})},doBrowserExtensionCheck:function m(n,o){try{var p=document.getElementsByTagName("head")[0],q=document.documentElement?document.documentElement.shadowRoot:null,r=[];if(q)r=Array.prototype.slice.call(q.querySelectorAll("style"));var s=Array.prototype.slice.call(p.querySelectorAll("style")).filter(function(v){return v&&v.textContent.length==0}),t={};t[h]=r.length>0;t[i]=s.length>0;if(n)r.forEach(function(v){v.disabled=true});if(o)s.forEach(function(v){v.disabled=true});c("Banzai").post("search_check",t)}catch(u){}}};f.exports=l}),null);
__d("GoodwillTemplateBanzaiLogger",["Banzai"],(function a(b,c,d,e,f,g){"use strict";var h={logClickEvent:function i(j,k){j.onclick=function(){if(k.goodwill_memories_and_celebrations)c("Banzai").post("goodwill_memories_and_celebrations",k.goodwill_memories_and_celebrations);if(k.goodwill_video)c("Banzai").post("goodwill_video",k.goodwill_video)}}};f.exports=h}),null);
__d("XDOMScannerResultsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ascend_mr_no/",{})}),null);